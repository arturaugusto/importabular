{"version":3,"sources":["../src/index.js","demo.js","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/css-loader.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["_events","_Importabular","data","node","onChange","minRows","maxRows","Infinity","minCols","maxCols","css","width","height","_LooseArray","e","_editing","preventDefault","rows","_parsePasteEvent","_selection","rx","ry","offset","x","y","length","_setVal","_changeSelectedCellsStyle","_selectionStart","_selectionEnd","_onDataChanged","asArr","_getSelectionAsArray","clipboardData","setData","_arrToHTML","map","row","join","copy","_setAllSelectedCellsTo","ctrlKey","key","_revertEdit","_stopEditing","_tabCursorInSelection","shiftKey","_moveCursor","_focus","_startEditing","_getCell","firstChild","value","mobile","which","_selectionSize","range","Range","setStart","setEnd","cwd","getSelection","removeAllRanges","addRange","tbody","style","userSelect","_getCoords","_selecting","_endSelection","_lastMouseUp","Date","now","_lastMouseUpTarget","target","moved","td","input","removeEventListener","_blurIfEnter","removeChild","_renderTDContent","code","keyCode","className","_classNames","div","tagName","textContent","_getVal","_restyle","Error","_parent","_options","_defaultCss","_iframeStyle","border","background","_setupDom","_replaceDataWithArray","_incrementToFit","_fillScrollSpace","Math","ceil","iframe","contentWindow","innerHeight","cols","innerWidth","_data","_toArr","document","createElement","setAttribute","toString","val","innerHTML","appendChild","open","write","navigator","language","close","Object","assign","table","body","_height","tr","_width","_addCell","forEach","name","addEventListener","_destroyEditing","parentElement","_fitBounds","Array","prototype","call","children","_incrementWidth","_incrementHeight","result","push","_forSelectionCoord","_refreshDisplayedValue","shiftSelectionEnd","curr","nc","_scrollIntoView","horizontal","delta","selectionSize","_shift","temporaryCursor","scrollIntoView","behavior","block","tdSize","getBoundingClientRect","cellSize","type","focus","callback","oldS","_getSelectionCoords","reverse","cb","classes","getAttribute","parseInt","_clear","line","deltaX","xMin","xMax","yMin","yMax","event","html","window","getData","trs","querySelectorAll","tds","text","fromText","split","hash","cleanedVal","_cleanVal","_isEmpty","max","obj","keys","arr","cell","outerHTML","sheet","Importabular","getElementById","console","info","getElementsByClassName","n","pre","js","innerText","trim","replace","lines","match","l","i","slice","bundleURL","getBundleURLCached","getBundleURL","err","matches","stack","getBaseURL","url","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","module","OVERLAY_ID","OldModule","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","clear","hmrApply","v","hmrAcceptRun","reload","onclose","log","removeErrorOverlay","error","message","overlay","createErrorOverlay","stackTrace","getParents","modules","parents","k","d","dep","isArray","concat","Function","deps","cached","cache","some"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAEA,IAAMA,OAAO,GAAG,CACd,WADc,EAEd,YAFc,EAGd,SAHc,EAId,YAJc,EAKd,YALc,EAMd,UANc,EAOd,WAPc,EAQd,SARc,EASd,OATc,EAUd,KAVc,EAWd,MAXc,CAAhB;AAcA;;;;;;;;;;;;;;;;;;IAiBqBC;AACnB,+BAWG;AAAA;;AAAA,yBAVDC,IAUC;AAAA,QAVDA,IAUC,0BAVM,EAUN;AAAA,yBATDC,IASC;AAAA,QATDA,IASC,0BATM,IASN;AAAA,6BARDC,QAQC;AAAA,QARDA,QAQC,8BARU,IAQV;AAAA,4BAPDC,OAOC;AAAA,QAPDA,OAOC,6BAPS,CAOT;AAAA,4BANDC,OAMC;AAAA,QANDA,OAMC,6BANSC,QAMT;AAAA,4BALDC,OAKC;AAAA,QALDA,OAKC,6BALS,CAKT;AAAA,4BAJDC,OAIC;AAAA,QAJDA,OAIC,6BAJSF,QAIT;AAAA,wBAHDG,GAGC;AAAA,QAHDA,GAGC,yBAHK,EAGL;AAAA,0BAFDC,KAEC;AAAA,QAFDA,KAEC,2BAFO,MAEP;AAAA,2BADDC,MACC;AAAA,QADDA,MACC,4BADQ,MACR;;AAAA;;AAAA,oCAiCM,CAjCN;;AAAA,qCAoCO,CApCP;;AAAA,mCAuCK,IAAIC,WAAJ,EAvCL;;AAAA,mCAkKK,UAACC,CAAD,EAAO;AACb,UAAI,KAAI,CAACC,QAAT,EAAmB;AACnBD,MAAAA,CAAC,CAACE,cAAF;;AACA,UAAMC,IAAI,GAAGC,gBAAgB,CAACJ,CAAD,CAA7B;;AAHa,6BAIM,KAAI,CAACK,UAJX;AAAA,UAILC,EAJK,oBAILA,EAJK;AAAA,UAIDC,EAJC,oBAIDA,EAJC;AAKb,UAAMC,MAAM,GAAG;AAAEC,QAAAA,CAAC,EAAEH,EAAE,CAAC,CAAD,CAAP;AAAYI,QAAAA,CAAC,EAAEH,EAAE,CAAC,CAAD;AAAjB,OAAf;;AAEA,WAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,IAAI,CAACQ,MAAzB,EAAiCD,CAAC,EAAlC;AACE;AACA;AACA;AACA,aAAK,IAAID,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,IAAI,CAAC,CAAD,CAAJ,CAAQQ,MAA5B,EAAoCF,CAAC,EAArC;AACE,UAAA,KAAI,CAACG,OAAL,CAAaJ,MAAM,CAACC,CAAP,GAAWA,CAAxB,EAA2BD,MAAM,CAACE,CAAP,GAAWA,CAAtC,EAAyCP,IAAI,CAACO,CAAD,CAAJ,CAAQD,CAAR,CAAzC;AADF;AAJF;;AAOA,MAAA,KAAI,CAACI,yBAAL,CAA+B,YAAM;AACnC,QAAA,KAAI,CAACC,eAAL,GAAuBN,MAAvB;AACA,QAAA,KAAI,CAACO,aAAL,GAAqB;AACnBN,UAAAA,CAAC,EAAED,MAAM,CAACC,CAAP,GAAWN,IAAI,CAAC,CAAD,CAAJ,CAAQQ,MAAnB,GAA4B,CADZ;AAEnBD,UAAAA,CAAC,EAAEF,MAAM,CAACE,CAAP,GAAWP,IAAI,CAACQ,MAAhB,GAAyB;AAFT,SAArB;AAID,OAND;;AAOA,MAAA,KAAI,CAACK,cAAL;AACD,KAxLE;;AAAA,kCA2MI,UAAChB,CAAD,EAAO;AACZ,UAAI,KAAI,CAACC,QAAT,EAAmB;;AACnB,UAAMgB,KAAK,GAAG,KAAI,CAACC,oBAAL,EAAd;;AACA,UAAID,KAAJ,EAAW;AACTjB,QAAAA,CAAC,CAACE,cAAF;AACAF,QAAAA,CAAC,CAACmB,aAAF,CAAgBC,OAAhB,CAAwB,WAAxB,EAAqCC,UAAU,CAACJ,KAAD,CAA/C;AACAjB,QAAAA,CAAC,CAACmB,aAAF,CAAgBC,OAAhB,CACE,YADF,EAEEH,KAAK,CAACK,GAAN,CAAU,UAACC,GAAD;AAAA,iBAASA,GAAG,CAACC,IAAJ,CAAS,EAAT,CAAT;AAAA,SAAV,EAAiCA,IAAjC,CAAsC,IAAtC,CAFF;AAID;AACF,KAtNE;;AAAA,iCA2NG,UAACxB,CAAD,EAAO;AACX,UAAI,KAAI,CAACC,QAAT,EAAmB;;AACnB,MAAA,KAAI,CAACwB,IAAL,CAAUzB,CAAV;;AACA,MAAA,KAAI,CAAC0B,sBAAL,CAA4B,EAA5B;AACD,KA/NE;;AAAA,qCAiOO,UAAC1B,CAAD,EAAO;AACf,UAAIA,CAAC,CAAC2B,OAAN,EAAe;;AAEf,UAAI,KAAI,CAACb,eAAT,EAA0B;AACxB,YAAId,CAAC,CAAC4B,GAAF,KAAU,QAAV,IAAsB,KAAI,CAAC3B,QAA/B,EAAyC;AACvCD,UAAAA,CAAC,CAACE,cAAF;;AACA,UAAA,KAAI,CAAC2B,WAAL;;AACA,UAAA,KAAI,CAACC,YAAL;AACD;;AACD,YAAI9B,CAAC,CAAC4B,GAAF,KAAU,OAAd,EAAuB;AACrB5B,UAAAA,CAAC,CAACE,cAAF;;AACA,UAAA,KAAI,CAAC6B,qBAAL,CAA2B,KAA3B,EAAkC/B,CAAC,CAACgC,QAAF,GAAa,CAAC,CAAd,GAAkB,CAApD;AACD;;AAED,YAAIhC,CAAC,CAAC4B,GAAF,KAAU,KAAd,EAAqB;AACnB5B,UAAAA,CAAC,CAACE,cAAF;;AACA,UAAA,KAAI,CAAC6B,qBAAL,CAA2B,IAA3B,EAAiC/B,CAAC,CAACgC,QAAF,GAAa,CAAC,CAAd,GAAkB,CAAnD;AACD;;AACD,YAAI,CAAC,KAAI,CAAC/B,QAAV,EAAoB;AAClB,cAAID,CAAC,CAAC4B,GAAF,KAAU,QAAV,IAAsB5B,CAAC,CAAC4B,GAAF,KAAU,WAApC,EAAiD;AAC/C5B,YAAAA,CAAC,CAACE,cAAF;;AACA,YAAA,KAAI,CAACwB,sBAAL,CAA4B,EAA5B;AACD;;AACD,cAAI1B,CAAC,CAAC4B,GAAF,KAAU,WAAd,EAA2B;AACzB5B,YAAAA,CAAC,CAACE,cAAF;;AACA,YAAA,KAAI,CAAC+B,WAAL,CAAiB;AAAEvB,cAAAA,CAAC,EAAE;AAAL,aAAjB,EAA2BV,CAAC,CAACgC,QAA7B;AACD;;AAED,cAAIhC,CAAC,CAAC4B,GAAF,KAAU,SAAd,EAAyB;AACvB5B,YAAAA,CAAC,CAACE,cAAF;;AACA,YAAA,KAAI,CAAC+B,WAAL,CAAiB;AAAEvB,cAAAA,CAAC,EAAE,CAAC;AAAN,aAAjB,EAA4BV,CAAC,CAACgC,QAA9B;AACD;;AACD,cAAIhC,CAAC,CAAC4B,GAAF,KAAU,WAAd,EAA2B;AACzB5B,YAAAA,CAAC,CAACE,cAAF;;AACA,YAAA,KAAI,CAAC+B,WAAL,CAAiB;AAAExB,cAAAA,CAAC,EAAE,CAAC;AAAN,aAAjB,EAA4BT,CAAC,CAACgC,QAA9B;AACD;;AACD,cAAIhC,CAAC,CAAC4B,GAAF,KAAU,YAAd,EAA4B;AAC1B5B,YAAAA,CAAC,CAACE,cAAF;;AACA,YAAA,KAAI,CAAC+B,WAAL,CAAiB;AAAExB,cAAAA,CAAC,EAAE,CAAC;AAAN,aAAjB,EAA4BT,CAAC,CAACgC,QAA9B;AACD;AACF;;AAED,YAAIhC,CAAC,CAAC4B,GAAF,CAAMjB,MAAN,KAAiB,CAAjB,IAAsB,CAAC,KAAI,CAACV,QAAhC,EAA0C;AACxC,UAAA,KAAI,CAACY,yBAAL,CAA+B,YAAM;AAAA,+BAClB,KAAI,CAACqB,MADa;AAAA,gBAC3BzB,CAD2B,gBAC3BA,CAD2B;AAAA,gBACxBC,CADwB,gBACxBA,CADwB,EAEnC;AACA;;AACA,YAAA,KAAI,CAACyB,aAAL,CAAmB;AAAE1B,cAAAA,CAAC,EAADA,CAAF;AAAKC,cAAAA,CAAC,EAADA;AAAL,aAAnB;;AACA,YAAA,KAAI,CAAC0B,QAAL,CAAc3B,CAAd,EAAiBC,CAAjB,EAAoB2B,UAApB,CAA+BC,KAA/B,GAAuC,EAAvC;AACD,WAND;AAOD;AACF;AACF,KArRE;;AAAA,wCAqWU,KArWV;;AAAA,6CAsWe,IAtWf;;AAAA,2CAuWa,IAvWb;;AAAA,wCAwWU;AAAEhC,MAAAA,EAAE,EAAE,CAAC,CAAD,EAAI,CAAJ,CAAN;AAAcC,MAAAA,EAAE,EAAE,CAAC,CAAD,EAAI,CAAJ;AAAlB,KAxWV;;AAAA,sCAyWQ,IAzWR;;AAAA,oCA0WM,IA1WN;;AAAA,uCA4WS,UAACP,CAAD,EAAO;AACjB,UAAI,KAAI,CAACuC,MAAT,EAAiB;;AACjB,UAAIvC,CAAC,CAACwC,KAAF,KAAY,CAAZ,IAAiB,CAAC,KAAI,CAACvC,QAAvB,IAAmC,KAAI,CAACwC,cAAL,EAAvC,EAA8D;AAC5D;AACA,YAAIC,KAAK,GAAG,IAAIC,KAAJ,EAAZ;AAF4D,gCAGzC,KAAI,CAACtC,UAHoC;AAAA,YAGpDC,EAHoD,qBAGpDA,EAHoD;AAAA,YAGhDC,EAHgD,qBAGhDA,EAHgD;AAI5DmC,QAAAA,KAAK,CAACE,QAAN,CAAe,KAAI,CAACR,QAAL,CAAc9B,EAAE,CAAC,CAAD,CAAhB,EAAqBC,EAAE,CAAC,CAAD,CAAvB,CAAf,EAA4C,CAA5C;AACAmC,QAAAA,KAAK,CAACG,MAAN,CAAa,KAAI,CAACT,QAAL,CAAc9B,EAAE,CAAC,CAAD,CAAhB,EAAqBC,EAAE,CAAC,CAAD,CAAvB,CAAb,EAA0C,CAA1C;;AACA,QAAA,KAAI,CAACuC,GAAL,CAASC,YAAT,GAAwBC,eAAxB;;AACA,QAAA,KAAI,CAACF,GAAL,CAASC,YAAT,GAAwBE,QAAxB,CAAiCP,KAAjC;;AAEA;AACD;;AACD,MAAA,KAAI,CAAC7B,yBAAL,CAA+B,YAAM;AACnC,QAAA,KAAI,CAACqC,KAAL,CAAWC,KAAX,CAAiBC,UAAjB,GAA8B,MAA9B;AACA,QAAA,KAAI,CAACrC,aAAL,GAAqB,KAAI,CAACD,eAAL,GAAuB,KAAI,CAACoB,MAAL,GAAc,KAAI,CAACmB,UAAL,CACxDrD,CADwD,CAA1D;AAGA,QAAA,KAAI,CAACsD,UAAL,GAAkB,IAAlB;AACD,OAND;AAOD,KAhYE;;AAAA,wCAiYU,UAACtD,CAAD,EAAO;AAClB,UAAI,KAAI,CAACuC,MAAT,EAAiB;;AACjB,UAAI,KAAI,CAACe,UAAT,EAAqB;AACnB,QAAA,KAAI,CAACzC,yBAAL,CAA+B,YAAM;AACnC,UAAA,KAAI,CAACE,aAAL,GAAqB,KAAI,CAACsC,UAAL,CAAgBrD,CAAhB,CAArB;AACD,SAFD;AAGD;AACF,KAxYE;;AAAA,0CA0YY,IA1YZ;;AAAA,gDA2YkB,IA3YlB;;AAAA,qCAkZO,UAACA,CAAD,EAAO;AACf,UAAI,KAAI,CAACuC,MAAT,EAAiB;AACjB,UAAIvC,CAAC,CAACwC,KAAF,KAAY,CAAhB,EAAmB;;AAEnB,UAAI,KAAI,CAACc,UAAT,EAAqB;AACnB,QAAA,KAAI,CAACzC,yBAAL,CAA+B,YAAM;AACnC,UAAA,KAAI,CAACE,aAAL,GAAqB,KAAI,CAACsC,UAAL,CAAgBrD,CAAhB,CAArB;;AACA,UAAA,KAAI,CAACuD,aAAL;;AAEA,cACE,KAAI,CAACC,YAAL,IACA,KAAI,CAACA,YAAL,GAAoBC,IAAI,CAACC,GAAL,KAAa,GADjC,IAEA,KAAI,CAACC,kBAAL,CAAwBlD,CAAxB,KAA8B,KAAI,CAACM,aAAL,CAAmBN,CAFjD,IAGA,KAAI,CAACkD,kBAAL,CAAwBjD,CAAxB,KAA8B,KAAI,CAACK,aAAL,CAAmBL,CAJnD,EAKE;AACA,YAAA,KAAI,CAACyB,aAAL,CAAmB,KAAI,CAACpB,aAAxB;AACD;;AACD,UAAA,KAAI,CAACyC,YAAL,GAAoBC,IAAI,CAACC,GAAL,EAApB;AACA,UAAA,KAAI,CAACC,kBAAL,GAA0B,KAAI,CAAC5C,aAA/B;AACD,SAdD;AAeD;AACF,KAvaE;;AAAA,wCAwaU,UAACf,CAAD,EAAO;AAClB,UAAIA,CAAC,CAAC4D,MAAF,KAAa,KAAI,CAACV,KAAlB,IAA2B,KAAI,CAACI,UAApC,EAAgD;AAC9C,QAAA,KAAI,CAACC,aAAL;AACD;AACF,KA5aE;;AAAA,wCA8aU,UAACvD,CAAD,EAAO;AAClB,UAAI,KAAI,CAACC,QAAT,EAAmB;AACnB,MAAA,KAAI,CAACsC,MAAL,GAAc,IAAd;AACA,MAAA,KAAI,CAACsB,KAAL,GAAa,KAAb;AACD,KAlbE;;AAAA,sCAmbQ,UAAC7D,CAAD,EAAO;AAChB,UAAI,CAAC,KAAI,CAACuC,MAAV,EAAkB;AAClB,UAAI,KAAI,CAACtC,QAAT,EAAmB;;AACnB,UAAI,CAAC,KAAI,CAAC4D,KAAV,EAAiB;AACf,QAAA,KAAI,CAAChD,yBAAL,CAA+B,YAAM;AACnC,UAAA,KAAI,CAACE,aAAL,GAAqB,KAAI,CAACD,eAAL,GAAuB,KAAI,CAACoB,MAAL,GAAc,KAAI,CAACmB,UAAL,CACxDrD,CADwD,CAA1D;AAGD,SAJD;;AAKA,QAAA,KAAI,CAACmC,aAAL,CAAmB,KAAI,CAACD,MAAxB;AACD;AACF,KA9bE;;AAAA,uCA+bS,UAAClC,CAAD,EAAO;AACjB,UAAI,CAAC,KAAI,CAACuC,MAAV,EAAkB;AAClB,MAAA,KAAI,CAACsB,KAAL,GAAa,IAAb;AACD,KAlcE;;AAAA,0CAsfY,YAAM;AACnB,UAAI,CAAC,KAAI,CAAC5D,QAAV,EAAoB;AADD,2BAEF,KAAI,CAACA,QAFH;AAAA,UAEXQ,CAFW,kBAEXA,CAFW;AAAA,UAERC,CAFQ,kBAERA,CAFQ;;AAGnB,UAAMoD,EAAE,GAAG,KAAI,CAAC1B,QAAL,CAAc3B,CAAd,EAAiBC,CAAjB,CAAX;;AACAoD,MAAAA,EAAE,CAACX,KAAH,CAAStD,KAAT,GAAiB,EAAjB;AACAiE,MAAAA,EAAE,CAACX,KAAH,CAASrD,MAAT,GAAkB,EAAlB;AACA,UAAMiE,KAAK,GAAGD,EAAE,CAACzB,UAAjB;AACA0B,MAAAA,KAAK,CAACC,mBAAN,CAA0B,MAA1B,EAAkC,KAAI,CAAClC,YAAvC;AACAiC,MAAAA,KAAK,CAACC,mBAAN,CAA0B,SAA1B,EAAqC,KAAI,CAACC,YAA1C;;AACA,MAAA,KAAI,CAACrD,OAAL,CAAaH,CAAb,EAAgBC,CAAhB,EAAmBqD,KAAK,CAACzB,KAAzB;;AACAwB,MAAAA,EAAE,CAACI,WAAH,CAAeH,KAAf;AACA,MAAA,KAAI,CAAC9D,QAAL,GAAgB,IAAhB;;AACA,MAAA,KAAI,CAACkE,gBAAL,CAAsBL,EAAtB,EAA0BrD,CAA1B,EAA6BC,CAA7B;;AACA,MAAA,KAAI,CAACM,cAAL;AACD,KApgBE;;AAAA,0CAqgBY,UAAChB,CAAD,EAAO;AACpB,UAAMoE,IAAI,GAAGpE,CAAC,CAACqE,OAAf;;AACA,UAAID,IAAI,KAAK,EAAb,EAAiB;AACf;AACA,QAAA,KAAI,CAACtC,YAAL;;AACA9B,QAAAA,CAAC,CAACE,cAAF;AACD;AACF,KA5gBE;;AAAA,sCAqiBQ,iBAAc;AAAA,UAAXO,CAAW,SAAXA,CAAW;AAAA,UAARC,CAAQ,SAARA,CAAQ;AACvB,MAAA,KAAI,CAAC0B,QAAL,CAAc3B,CAAd,EAAiBC,CAAjB,EAAoB4D,SAApB,GAAgC,KAAI,CAACC,WAAL,CAAiB9D,CAAjB,EAAoBC,CAApB,CAAhC;AACD,KAviBE;;AAAA,oDAkkBsB,iBAAc;AAAA,UAAXD,CAAW,SAAXA,CAAW;AAAA,UAARC,CAAQ,SAARA,CAAQ;;AACrC,UAAM8D,GAAG,GAAG,KAAI,CAACpC,QAAL,CAAc3B,CAAd,EAAiBC,CAAjB,EAAoB2B,UAAhC;;AACA,UAAImC,GAAG,CAACC,OAAJ,KAAgB,KAApB,EAA2B;AACzBD,QAAAA,GAAG,CAACE,WAAJ,GAAkB,KAAI,CAACC,OAAL,CAAalE,CAAb,EAAgBC,CAAhB,CAAlB;AACD;;AACD,MAAA,KAAI,CAACkE,QAAL,CAAc;AAAEnE,QAAAA,CAAC,EAADA,CAAF;AAAKC,QAAAA,CAAC,EAADA;AAAL,OAAd;AACD,KAxkBE;;AACD,QAAI,CAACrB,IAAL,EAAW;AACT,YAAM,IAAIwF,KAAJ,CACJ,uGADI,CAAN;AAGD,KALA,CAMD;;;AACA,SAAKC,OAAL,GAAezF,IAAf;AACA,SAAK0F,QAAL,GAAgB;AACdzF,MAAAA,QAAQ,EAARA,QADc;AAEdC,MAAAA,OAAO,EAAPA,OAFc;AAGdC,MAAAA,OAAO,EAAPA,OAHc;AAIdE,MAAAA,OAAO,EAAPA,OAJc;AAKdC,MAAAA,OAAO,EAAPA,OALc;AAMdC,MAAAA,GAAG,EAAEoF,WAAW,GAAGpF;AANL,KAAhB;AAQA,SAAKqF,YAAL,GAAoB;AAClBpF,MAAAA,KAAK,EAALA,KADkB;AAElBC,MAAAA,MAAM,EAANA,MAFkB;AAGlBoF,MAAAA,MAAM,EAAE,MAHU;AAIlBC,MAAAA,UAAU,EAAE;AAJM,KAApB;;AAOA,SAAKC,SAAL;;AACA,SAAKC,qBAAL,CAA2BjG,IAA3B;;AACA,SAAKkG,eAAL,CAAqB;AACnB7E,MAAAA,CAAC,EAAE,KAAKsE,QAAL,CAAcrF,OAAd,GAAwB,CADR;AAEnBgB,MAAAA,CAAC,EAAE,KAAKqE,QAAL,CAAcxF,OAAd,GAAwB;AAFR,KAArB;;AAIA,SAAKgG,gBAAL;AACD;AAED;;;;;;AASA;sCACqB;AAAA,UAAR9E,CAAQ,SAARA,CAAQ;AAAA,UAALC,CAAK,SAALA,CAAK;AACnB,aACED,CAAC,IAAI,CAAL,IAAUA,CAAC,GAAG,KAAKsE,QAAL,CAAcpF,OAA5B,IAAuCe,CAAC,IAAI,CAA5C,IAAiDA,CAAC,GAAG,KAAKqE,QAAL,CAAcvF,OADrE;AAGD;AAED;;;;uCACmB;AACjB,UAAMW,IAAI,GAAGqF,IAAI,CAACC,IAAL,CAAU,KAAKC,MAAL,CAAYC,aAAZ,CAA0BC,WAA1B,GAAwC,EAAlD,CAAb;AACA,UAAMC,IAAI,GAAGL,IAAI,CAACC,IAAL,CAAU,KAAKC,MAAL,CAAYC,aAAZ,CAA0BG,UAA1B,GAAuC,GAAjD,CAAb;;AACA,WAAKR,eAAL,CAAqB;AAAE7E,QAAAA,CAAC,EAAEoF,IAAI,GAAG,CAAZ;AAAenF,QAAAA,CAAC,EAAEP,IAAI,GAAG;AAAzB,OAArB;AACD;AAED;;;;qCACiB;AACf,UAAI,KAAK4E,QAAL,CAAczF,QAAlB,EAA4B,KAAKyF,QAAL,CAAczF,QAAd,CAAuB,KAAKyG,KAAL,CAAWC,MAAX,EAAvB;AAC7B;AAED;;;;qCACiBlC,IAAIrD,GAAGC,GAAG;AACzB,UAAM8D,GAAG,GAAGyB,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAZ;AACApC,MAAAA,EAAE,CAACqC,YAAH,CAAgB,GAAhB,EAAqB1F,CAAC,CAAC2F,QAAF,EAArB;AACAtC,MAAAA,EAAE,CAACqC,YAAH,CAAgB,GAAhB,EAAqBzF,CAAC,CAAC0F,QAAF,EAArB;;AACA,UAAMC,GAAG,GAAG,KAAK1B,OAAL,CAAalE,CAAb,EAAgBC,CAAhB,CAAZ;;AACA,UAAI2F,GAAJ,EAAS;AACP7B,QAAAA,GAAG,CAACE,WAAJ,GAAkB2B,GAAlB;AACD,OAFD,MAEO;AACL;AACA7B,QAAAA,GAAG,CAAC8B,SAAJ,GAAgB,QAAhB;AACD;;AACDxC,MAAAA,EAAE,CAACyC,WAAH,CAAe/B,GAAf;;AACA,WAAKI,QAAL,CAAc;AAAEnE,QAAAA,CAAC,EAADA,CAAF;AAAKC,QAAAA,CAAC,EAADA;AAAL,OAAd;AACD;AAED;;;;gCACY;AAAA;;AACV;AACA;AACA;AACA;AACA,UAAMgF,MAAM,GAAGO,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;AACA,WAAKR,MAAL,GAAcA,MAAd;;AACA,WAAKZ,OAAL,CAAayB,WAAb,CAAyBb,MAAzB;;AACA,UAAM5C,GAAG,GAAG4C,MAAM,CAACC,aAAP,CAAqBM,QAAjC;AACA,WAAKnD,GAAL,GAAWA,GAAX;AACAA,MAAAA,GAAG,CAAC0D,IAAJ;AACA1D,MAAAA,GAAG,CAAC2D,KAAJ,wBACiBC,SAAS,CAACC,QAD3B,6BACqD,KAAK5B,QAAL,CAAcnF,GADnE;AAGAkD,MAAAA,GAAG,CAAC8D,KAAJ;AACAC,MAAAA,MAAM,CAACC,MAAP,CAAcpB,MAAM,CAACvC,KAArB,EAA4B,KAAK8B,YAAjC;AAEA,UAAM8B,KAAK,GAAGd,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAd;AACA,UAAMhD,KAAK,GAAG+C,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAd;AAEAa,MAAAA,KAAK,CAACR,WAAN,CAAkBrD,KAAlB;AACAJ,MAAAA,GAAG,CAACkE,IAAJ,CAAST,WAAT,CAAqBQ,KAArB;AACA,WAAK7D,KAAL,GAAaA,KAAb;AACA,WAAK6D,KAAL,GAAaA,KAAb;;AAEA,WAAK,IAAIrG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKuG,OAAzB,EAAkCvG,CAAC,EAAnC,EAAuC;AACrC,YAAMwG,EAAE,GAAGjB,QAAQ,CAACC,aAAT,CAAuB,IAAvB,CAAX;AACAhD,QAAAA,KAAK,CAACqD,WAAN,CAAkBW,EAAlB;;AACA,aAAK,IAAIzG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK0G,MAAzB,EAAiC1G,CAAC,EAAlC,EAAsC;AACpC,eAAK2G,QAAL,CAAcF,EAAd,EAAkBzG,CAAlB,EAAqBC,CAArB;AACD;AACF;;AAEDxB,MAAAA,OAAO,CAACmI,OAAR,CAAgB,UAACC,IAAD;AAAA,eAAUxE,GAAG,CAACyE,gBAAJ,CAAqBD,IAArB,EAA2B,MAAI,CAACA,IAAD,CAA/B,EAAuC,IAAvC,CAAV;AAAA,OAAhB;AACD;AAED;;;;;;8BAGU;AAAA;;AACR,WAAKE,eAAL;;AAEAtI,MAAAA,OAAO,CAACmI,OAAR,CAAgB,UAACC,IAAD;AAAA,eACd,MAAI,CAACxE,GAAL,CAASkB,mBAAT,CAA6BsD,IAA7B,EAAmC,MAAI,CAACA,IAAD,CAAvC,EAA+C,IAA/C,CADc;AAAA,OAAhB;;AAIA,WAAK5B,MAAL,CAAY+B,aAAZ,CAA0BvD,WAA1B,CAAsC,KAAKwB,MAA3C;AACD;AAED;;;;6BACSwB,IAAIzG,GAAGC,GAAG;AACjB,UAAMoD,EAAE,GAAGmC,QAAQ,CAACC,aAAT,CAAuB,IAAvB,CAAX;AACAgB,MAAAA,EAAE,CAACX,WAAH,CAAezC,EAAf;;AACA,WAAKK,gBAAL,CAAsBL,EAAtB,EAA0BrD,CAA1B,EAA6BC,CAA7B;AACD;;;uCAEkB;AACjB,UAAI,CAAC,KAAKgH,UAAL,CAAgB;AAAEjH,QAAAA,CAAC,EAAE,CAAL;AAAQC,QAAAA,CAAC,EAAE,KAAKuG;AAAhB,OAAhB,CAAL,EAAiD,OAAO,KAAP;AACjD,WAAKA,OAAL;AACA,UAAMvG,CAAC,GAAG,KAAKuG,OAAL,GAAe,CAAzB;AACA,UAAMC,EAAE,GAAGjB,QAAQ,CAACC,aAAT,CAAuB,IAAvB,CAAX;AAEA,WAAKhD,KAAL,CAAWqD,WAAX,CAAuBW,EAAvB;;AACA,WAAK,IAAIzG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK0G,MAAzB,EAAiC1G,CAAC,EAAlC,EAAsC;AACpC,aAAK2G,QAAL,CAAcF,EAAd,EAAkBzG,CAAlB,EAAqBC,CAArB;AACD;;AACD,aAAO,IAAP;AACD;;;sCAEiB;AAAA;;AAChB,UAAI,CAAC,KAAKgH,UAAL,CAAgB;AAAEjH,QAAAA,CAAC,EAAE,KAAK0G,MAAV;AAAkBzG,QAAAA,CAAC,EAAE;AAArB,OAAhB,CAAL,EAAgD,OAAO,KAAP;AAChD,WAAKyG,MAAL;AACA,UAAM1G,CAAC,GAAG,KAAK0G,MAAL,GAAc,CAAxB;AACAQ,MAAAA,KAAK,CAACC,SAAN,CAAgBP,OAAhB,CAAwBQ,IAAxB,CAA6B,KAAK3E,KAAL,CAAW4E,QAAxC,EAAkD,UAACZ,EAAD,EAAKxG,CAAL,EAAW;AAC3D,QAAA,MAAI,CAAC0G,QAAL,CAAcF,EAAd,EAAkBzG,CAAlB,EAAqBC,CAArB;AACD,OAFD;AAGA,aAAO,IAAP;AACD;AACD;;;;2CAC0B;AAAA,UAARD,CAAQ,SAARA,CAAQ;AAAA,UAALC,CAAK,SAALA,CAAK;;AACxB,aAAOD,CAAC,GAAG,KAAK0G,MAAL,GAAc,CAAlB,IAAuB,KAAKY,eAAL,EAA9B;AAAqD;AAArD;;AACA,aAAOrH,CAAC,GAAG,KAAKuG,OAAL,GAAe,CAAnB,IAAwB,KAAKe,gBAAL,EAA/B;AAAuD;AAAvD;AACD;AAED;;;;;AAyBA;2CACuB;AAAA,8BACF,KAAK3H,UADH;AAAA,UACbC,EADa,qBACbA,EADa;AAAA,UACTC,EADS,qBACTA,EADS;AAErB,UAAID,EAAE,CAAC,CAAD,CAAF,KAAUA,EAAE,CAAC,CAAD,CAAhB,EAAqB,OAAO,IAAP;AACrB,UAAMT,KAAK,GAAGS,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,CAAD,CAAxB;AACA,UAAMR,MAAM,GAAGS,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,CAAD,CAAzB;AACA,UAAM0H,MAAM,GAAG,EAAf;;AACA,WAAK,IAAIvH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGZ,MAApB,EAA4BY,CAAC,EAA7B,EAAiC;AAC/BuH,QAAAA,MAAM,CAACC,IAAP,CAAY,EAAZ;;AACA,aAAK,IAAIzH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGZ,KAApB,EAA2BY,CAAC,EAA5B,EAAgC;AAC9BwH,UAAAA,MAAM,CAACvH,CAAD,CAAN,CAAUwH,IAAV,CAAe,KAAKvD,OAAL,CAAarE,EAAE,CAAC,CAAD,CAAF,GAAQG,CAArB,EAAwBF,EAAE,CAAC,CAAD,CAAF,GAAQG,CAAhC,CAAf;AACD;AACF;;AACD,aAAOuH,MAAP;AACD;AAED;;;;2CA6EuB3F,OAAO;AAAA;;AAC5B,WAAK6F,kBAAL,CAAwB,KAAK9H,UAA7B,EAAyC;AAAA,YAAGI,CAAH,SAAGA,CAAH;AAAA,YAAMC,CAAN,SAAMA,CAAN;AAAA,eACvC,MAAI,CAACE,OAAL,CAAaH,CAAb,EAAgBC,CAAhB,EAAmB4B,KAAnB,CADuC;AAAA,OAAzC;;AAGA,WAAK6F,kBAAL,CAAwB,KAAK9H,UAA7B,EAAyC,KAAK+H,sBAA9C;;AAEA,WAAKpH,cAAL;AACD;;;uCAE6BqH,mBAAmB;AAAA;;AAAA,0BAAnC5H,CAAmC;AAAA,UAAnCA,CAAmC,wBAA/B,CAA+B;AAAA,0BAA5BC,CAA4B;AAAA,UAA5BA,CAA4B,wBAAxB,CAAwB;AAC/C,UAAM4H,IAAI,GAAGD,iBAAiB,GAAG,KAAKtH,aAAR,GAAwB,KAAKD,eAA3D;AACA,UAAMyH,EAAE,GAAG;AAAE9H,QAAAA,CAAC,EAAE6H,IAAI,CAAC7H,CAAL,GAASA,CAAd;AAAiBC,QAAAA,CAAC,EAAE4H,IAAI,CAAC5H,CAAL,GAASA;AAA7B,OAAX;AACA,UAAI,CAAC,KAAKgH,UAAL,CAAgBa,EAAhB,CAAL,EAA0B;;AAC1B,WAAKzG,YAAL;;AACA,WAAKwD,eAAL,CAAqBiD,EAArB;;AACA,WAAK1H,yBAAL,CAA+B,YAAM;AACnC,YAAIwH,iBAAJ,EAAuB;AACrB,UAAA,MAAI,CAACtH,aAAL,GAAqBwH,EAArB;AACD,SAFD,MAEO;AACL,UAAA,MAAI,CAACzH,eAAL,GAAuB,MAAI,CAACC,aAAL,GAAqB,MAAI,CAACmB,MAAL,GAAcqG,EAA1D;AACD;AACF,OAND;;AAOA,WAAKC,eAAL,CAAqBD,EAArB;AACD;;;0CAEqBE,YAAuB;AAAA;;AAAA,UAAXC,KAAW,uEAAH,CAAG;;AAC3C;AACA;AACA;AAH2C,kBAI5B,KAAKxG,MAAL,IAAe;AAAEzB,QAAAA,CAAC,EAAE,CAAL;AAAQC,QAAAA,CAAC,EAAE;AAAX,OAJa;AAAA,UAIrCD,CAJqC,SAIrCA,CAJqC;AAAA,UAIlCC,CAJkC,SAIlCA,CAJkC;;AAK3C,UAAMiI,aAAa,GAAG,KAAKlG,cAAL,EAAtB;;AAL2C,kBAOzCkG,aAAa,GAAG,CAAhB,GACI,KAAKtI,UADT,GAEI;AACEC,QAAAA,EAAE,EAAE,CAAC,CAAD,EAAI,KAAKyE,QAAL,CAAcpF,OAAlB,CADN;AAEEY,QAAAA,EAAE,EAAE,CAAC,CAAD,EAAI,KAAKwE,QAAL,CAAcvF,OAAlB;AAFN,OATqC;AAAA,UAMnCc,EANmC,SAMnCA,EANmC;AAAA,UAM/BC,EAN+B,SAM/BA,EAN+B;;AAc3C,UAAIgI,EAAJ;;AACA,UAAIE,UAAJ,EAAgB;AACdF,QAAAA,EAAE,GAAGK,MAAM,CAACnI,CAAD,EAAIC,CAAJ,EAAOgI,KAAP,EAAcpI,EAAE,CAAC,CAAD,CAAhB,EAAqBA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAA7B,EAAgCC,EAAE,CAAC,CAAD,CAAlC,EAAuCA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAA/C,CAAX;AACD,OAFD,MAEO;AACL;AACA,YAAMsI,eAAe,GAAGD,MAAM,CAC5BlI,CAD4B,EAE5BD,CAF4B,EAG5BiI,KAH4B,EAI5BnI,EAAE,CAAC,CAAD,CAJ0B,EAK5BA,EAAE,CAAC,CAAD,CAAF,GAAQ,CALoB,EAM5BD,EAAE,CAAC,CAAD,CAN0B,EAO5BA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAPoB,CAA9B;;AASAiI,QAAAA,EAAE,GAAG;AACH9H,UAAAA,CAAC,EAAEoI,eAAe,CAACnI,CADhB;AAEHA,UAAAA,CAAC,EAAEmI,eAAe,CAACpI;AAFhB,SAAL;AAID;;AAED,UAAI,CAAC,KAAKiH,UAAL,CAAgBa,EAAhB,CAAL,EAA0B;;AAC1B,WAAKzG,YAAL;;AACA,WAAKwD,eAAL,CAAqBiD,EAArB;;AACA,WAAK1H,yBAAL,CAA+B,YAAM;AACnC,QAAA,MAAI,CAACqB,MAAL,GAAcqG,EAAd;;AACA,YAAII,aAAa,IAAI,CAArB,EAAwB;AACtB,UAAA,MAAI,CAAC7H,eAAL,GAAuB,MAAI,CAACC,aAAL,GAAqBwH,EAA5C;AACD;AACF,OALD;;AAMA,WAAKC,eAAL,CAAqBD,EAArB;AACD;;;4CAEyB;AAAA,UAAR9H,CAAQ,UAARA,CAAQ;AAAA,UAALC,CAAK,UAALA,CAAK;;AACxB,WAAK0B,QAAL,CAAc3B,CAAd,EAAiBC,CAAjB,EAAoBoI,cAApB,CAAmC;AACjCC,QAAAA,QAAQ,EAAE,QADuB;AAEjCC,QAAAA,KAAK,EAAE;AAF0B,OAAnC;AAID;;;oCA0Ce;AACd,WAAK1F,UAAL,GAAkB,KAAlB;AACA,WAAKJ,KAAL,CAAWC,KAAX,CAAiBC,UAAjB,GAA8B,EAA9B;AACD;;;0CAoDuB;AAAA,UAAR3C,CAAQ,UAARA,CAAQ;AAAA,UAALC,CAAK,UAALA,CAAK;AACtB,WAAKT,QAAL,GAAgB;AAAEQ,QAAAA,CAAC,EAADA,CAAF;AAAKC,QAAAA,CAAC,EAADA;AAAL,OAAhB;;AACA,UAAMoD,EAAE,GAAG,KAAK1B,QAAL,CAAc3B,CAAd,EAAiBC,CAAjB,CAAX,CAFsB,CAItB;;;AACA,UAAMuI,MAAM,GAAGnF,EAAE,CAACoF,qBAAH,EAAf;AACA,UAAMC,QAAQ,GAAGrF,EAAE,CAACzB,UAAH,CAAc6G,qBAAd,EAAjB,CANsB,CAQtB;;AACApF,MAAAA,EAAE,CAACI,WAAH,CAAeJ,EAAE,CAACzB,UAAlB,EATsB,CAWtB;;AACA,UAAM0B,KAAK,GAAGkC,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAd;AACAnC,MAAAA,KAAK,CAACqF,IAAN,GAAa,MAAb;AACArF,MAAAA,KAAK,CAACzB,KAAN,GAAc,KAAKqC,OAAL,CAAalE,CAAb,EAAgBC,CAAhB,CAAd;AACAoD,MAAAA,EAAE,CAACyC,WAAH,CAAexC,KAAf,EAfsB,CAiBtB;;AACA8C,MAAAA,MAAM,CAACC,MAAP,CAAchD,EAAE,CAACX,KAAjB,EAAwB;AACtBtD,QAAAA,KAAK,EAAEoJ,MAAM,CAACpJ,KAAP,GAAa,CADE;AAEtBC,QAAAA,MAAM,EAAEmJ,MAAM,CAACnJ;AAFO,OAAxB;AAKA+G,MAAAA,MAAM,CAACC,MAAP,CAAc/C,KAAK,CAACZ,KAApB,EAA2B;AACzBtD,QAAAA,KAAK,YAAKsJ,QAAQ,CAACtJ,KAAd,OADoB;AAEzBC,QAAAA,MAAM,YAAKqJ,QAAQ,CAACrJ,MAAd;AAFmB,OAA3B;AAKAiE,MAAAA,KAAK,CAACsF,KAAN;AACAtF,MAAAA,KAAK,CAACwD,gBAAN,CAAuB,MAAvB,EAA+B,KAAKzF,YAApC;AACAiC,MAAAA,KAAK,CAACwD,gBAAN,CAAuB,SAAvB,EAAkC,KAAKtD,YAAvC;AACD;;;sCAEiB;AAChB,UAAI,KAAKhE,QAAT,EAAmB;AAAA,8BACA,KAAKA,QADL;AAAA,YACTQ,CADS,mBACTA,CADS;AAAA,YACNC,CADM,mBACNA,CADM;;AAEjB,YAAMqD,KAAK,GAAG,KAAK3B,QAAL,CAAc3B,CAAd,EAAiBC,CAAjB,EAAoB2B,UAAlC;;AACA0B,QAAAA,KAAK,CAACC,mBAAN,CAA0B,MAA1B,EAAkC,KAAKlC,YAAvC;AACAiC,QAAAA,KAAK,CAACC,mBAAN,CAA0B,SAA1B,EAAqC,KAAKC,YAA1C;AACD;AACF;;;kCAEa;AACZ,UAAI,CAAC,KAAKhE,QAAV,EAAoB;AADR,4BAEK,KAAKA,QAFV;AAAA,UAEJQ,CAFI,mBAEJA,CAFI;AAAA,UAEDC,CAFC,mBAEDA,CAFC;;AAGZ,UAAMoD,EAAE,GAAG,KAAK1B,QAAL,CAAc3B,CAAd,EAAiBC,CAAjB,CAAX;;AACA,UAAMqD,KAAK,GAAGD,EAAE,CAACzB,UAAjB;AACA0B,MAAAA,KAAK,CAACzB,KAAN,GAAc,KAAKqC,OAAL,CAAalE,CAAb,EAAgBC,CAAhB,CAAd;AACD;;;8CA0ByB4I,UAAU;AAClC,UAAMC,IAAI,GAAG,KAAKlJ,UAAlB;AACAiJ,MAAAA,QAAQ;AACR,WAAKjJ,UAAL,GAAkB,KAAKmJ,mBAAL,EAAlB;;AACA,WAAKrB,kBAAL,CAAwBoB,IAAxB,EAA8B,KAAK3E,QAAnC;;AACA,WAAKuD,kBAAL,CAAwB,KAAK9H,UAA7B,EAAyC,KAAKuE,QAA9C;AACD;;;0CAEqB;AACpB,UAAI,CAAC,KAAK9D,eAAV,EAA2B,OAAO;AAAER,QAAAA,EAAE,EAAE,CAAC,CAAD,EAAI,CAAJ,CAAN;AAAcC,QAAAA,EAAE,EAAE,CAAC,CAAD,EAAI,CAAJ;AAAlB,OAAP;AAC3B,UAAID,EAAE,GAAG,CAAC,KAAKQ,eAAL,CAAqBL,CAAtB,EAAyB,KAAKM,aAAL,CAAmBN,CAA5C,CAAT;AACA,UAAIH,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,CAAD,CAAd,EAAmBA,EAAE,CAACmJ,OAAH;AACnB,UAAIlJ,EAAE,GAAG,CAAC,KAAKO,eAAL,CAAqBJ,CAAtB,EAAyB,KAAKK,aAAL,CAAmBL,CAA5C,CAAT;AACA,UAAIH,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,CAAD,CAAd,EAAmBA,EAAE,CAACkJ,OAAH;AACnB,aAAO;AAAEnJ,QAAAA,EAAE,EAAE,CAACA,EAAE,CAAC,CAAD,CAAH,EAAQA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAhB,CAAN;AAA0BC,QAAAA,EAAE,EAAE,CAACA,EAAE,CAAC,CAAD,CAAH,EAAQA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAhB;AAA9B,OAAP;AACD;;;+CAE8BmJ,IAAI;AAAA,UAAdpJ,EAAc,UAAdA,EAAc;AAAA,UAAVC,EAAU,UAAVA,EAAU;;AACjC,WAAK,IAAIE,CAAC,GAAGH,EAAE,CAAC,CAAD,CAAf,EAAoBG,CAAC,GAAGH,EAAE,CAAC,CAAD,CAA1B,EAA+BG,CAAC,EAAhC;AACE,aAAK,IAAIC,CAAC,GAAGH,EAAE,CAAC,CAAD,CAAf,EAAoBG,CAAC,GAAGH,EAAE,CAAC,CAAD,CAA1B,EAA+BG,CAAC,EAAhC;AACE,cAAI,KAAKgH,UAAL,CAAgB;AAAEjH,YAAAA,CAAC,EAADA,CAAF;AAAKC,YAAAA,CAAC,EAADA;AAAL,WAAhB,CAAJ,EAA+BgJ,EAAE,CAAC;AAAEjJ,YAAAA,CAAC,EAADA,CAAF;AAAKC,YAAAA,CAAC,EAADA;AAAL,WAAD,CAAF;AADjC;AADF;AAGD;;;qCAMgB;AAAA,8BACI,KAAKL,UADT;AAAA,UACPC,EADO,qBACPA,EADO;AAAA,UACHC,EADG,qBACHA,EADG;AAEf,aAAO,CAACD,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,CAAD,CAAX,KAAmBC,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,CAAD,CAA7B,CAAP;AACD;;;gCAEWE,GAAGC,GAAG;AAAA,8BACG,KAAKL,UADR;AAAA,UACRC,EADQ,qBACRA,EADQ;AAAA,UACJC,EADI,qBACJA,EADI;AAEhB,UAAIoJ,OAAO,GAAG,EAAd;;AACA,UAAIlJ,CAAC,IAAIH,EAAE,CAAC,CAAD,CAAP,IAAcG,CAAC,GAAGH,EAAE,CAAC,CAAD,CAApB,IAA2BI,CAAC,IAAIH,EAAE,CAAC,CAAD,CAAlC,IAAyCG,CAAC,GAAGH,EAAE,CAAC,CAAD,CAAnD,EAAwD;AACtDoJ,QAAAA,OAAO,IAAI,WAAX;;AACA,YAAI,KAAKlH,cAAL,KAAwB,CAA5B,EAA+B;AAC7BkH,UAAAA,OAAO,IAAI,QAAX;AACD;AACF;;AAED,UAAI,KAAKzH,MAAL,IAAe,KAAKA,MAAL,CAAYzB,CAAZ,KAAkBA,CAAjC,IAAsC,KAAKyB,MAAL,CAAYxB,CAAZ,KAAkBA,CAA5D,EAA+D;AAC7DiJ,QAAAA,OAAO,IAAI,QAAX;AACD;;AACD,UAAI,KAAK1J,QAAL,IAAiBQ,CAAC,KAAK,KAAKR,QAAL,CAAcQ,CAArC,IAA0CC,CAAC,KAAK,KAAKT,QAAL,CAAcS,CAAlE,EAAqE;AACnEiJ,QAAAA,OAAO,IAAI,UAAX;AACD;;AAED,aAAOA,OAAP;AACD;;;+BAUU3J,GAAG;AACZ;AACA,UAAIX,IAAI,GAAGW,CAAC,CAAC4D,MAAb;;AACA,aAAO,CAACvE,IAAI,CAACuK,YAAL,CAAkB,GAAlB,CAAD,IAA2BvK,IAAI,CAACoI,aAAvC,EAAsD;AACpDpI,QAAAA,IAAI,GAAGA,IAAI,CAACoI,aAAZ;AACD;;AACD,aAAO;AACLhH,QAAAA,CAAC,EAAEoJ,QAAQ,CAACxK,IAAI,CAACuK,YAAL,CAAkB,GAAlB,CAAD,CAAR,IAAoC,CADlC;AAELlJ,QAAAA,CAAC,EAAEmJ,QAAQ,CAACxK,IAAI,CAACuK,YAAL,CAAkB,GAAlB,CAAD,CAAR,IAAoC;AAFlC,OAAP;AAID;AAED;;;;;;4BAGQxK,MAAM;AACZ;AACA,WAAK2G,KAAL,CAAW+D,MAAX,GAFY,CAGZ;;;AACA,WAAKzE,qBAAL,CAA2BjG,IAA3B,EAJY,CAMZ;AACA;;;AACA,WAAK,IAAIqB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK0G,MAAzB,EAAiC1G,CAAC,EAAlC;AACE,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKuG,OAAzB,EAAkCvG,CAAC,EAAnC;AACE,eAAK0H,sBAAL,CAA4B;AAAE3H,YAAAA,CAAC,EAADA,CAAF;AAAKC,YAAAA,CAAC,EAADA;AAAL,WAA5B;AADF;AADF;AAGD;AAED;;;;;;;8BAIU;AACR,aAAO,KAAKqF,KAAL,CAAWC,MAAX,EAAP;AACD;;;0CAEqB5G,MAAM;AAAA;;AAC1BA,MAAAA,IAAI,CAACiI,OAAL,CAAa,UAAC0C,IAAD,EAAOrJ,CAAP,EAAa;AACxBqJ,QAAAA,IAAI,CAAC1C,OAAL,CAAa,UAAChB,GAAD,EAAM5F,CAAN,EAAY;AACvB,UAAA,MAAI,CAACG,OAAL,CAAaH,CAAb,EAAgBC,CAAhB,EAAmB2F,GAAnB;AACD,SAFD;AAGD,OAJD;AAKD;;;4BAEO5F,GAAGC,GAAG2F,KAAK;AACjB,UAAI,CAAC,KAAKqB,UAAL,CAAgB;AAAEjH,QAAAA,CAAC,EAADA,CAAF;AAAKC,QAAAA,CAAC,EAADA;AAAL,OAAhB,CAAL,EAAgC;;AAEhC,WAAKqF,KAAL,CAAWnF,OAAX,CAAmBH,CAAnB,EAAsBC,CAAtB,EAAyB2F,GAAzB;;AACA,WAAKf,eAAL,CAAqB;AAAE7E,QAAAA,CAAC,EAAEA,CAAC,GAAG,CAAT;AAAYC,QAAAA,CAAC,EAAEA,CAAC,GAAG;AAAnB,OAArB;;AACA,WAAK0H,sBAAL,CAA4B;AAAE3H,QAAAA,CAAC,EAADA,CAAF;AAAKC,QAAAA,CAAC,EAADA;AAAL,OAA5B;AACD;;;4BAEOD,GAAGC,GAAG;AACZ,aAAO,KAAKqF,KAAL,CAAWpB,OAAX,CAAmBlE,CAAnB,EAAsBC,CAAtB,CAAP;AACD;;;6BAEQD,GAAGC,GAAG;AACb,aAAO,KAAKwC,KAAL,CAAW4E,QAAX,CAAoBpH,CAApB,EAAuBoH,QAAvB,CAAgCrH,CAAhC,CAAP;AACD;;;;;;;;AAEI,SAASmI,MAAT,CAAgBnI,CAAhB,EAAmBC,CAAnB,EAAsBsJ,MAAtB,EAA8BC,IAA9B,EAAoCC,IAApC,EAA0CC,IAA1C,EAAgDC,IAAhD,EAAsD;AAC3D3J,EAAAA,CAAC,IAAIuJ,MAAL;;AACA,MAAIvJ,CAAC,GAAGwJ,IAAR,EAAc;AACZ,QAAIC,IAAI,KAAKzK,QAAb,EAAuB;AACrB,aAAO;AAAEgB,QAAAA,CAAC,EAAEwJ,IAAL;AAAWvJ,QAAAA,CAAC,EAADA;AAAX,OAAP;AACD;;AACDD,IAAAA,CAAC,GAAGyJ,IAAJ;AACAxJ,IAAAA,CAAC;;AACD,QAAIA,CAAC,GAAGyJ,IAAR,EAAc;AACZ,UAAIC,IAAI,KAAK3K,QAAb,EAAuB;AACrB,eAAO;AAAEgB,UAAAA,CAAC,EAAEwJ,IAAL;AAAWvJ,UAAAA,CAAC,EAAEyJ;AAAd,SAAP;AACD;;AACDzJ,MAAAA,CAAC,GAAG0J,IAAJ;AACD;AACF;;AACD,MAAI3J,CAAC,GAAGyJ,IAAR,EAAc;AACZzJ,IAAAA,CAAC,GAAGwJ,IAAJ;AACAvJ,IAAAA,CAAC;;AACD,QAAIA,CAAC,GAAG0J,IAAR,EAAc;AACZ1J,MAAAA,CAAC,GAAGyJ,IAAJ;AACA1J,MAAAA,CAAC,GAAGwJ,IAAJ;AACD;AACF;;AACD,SAAO;AAAExJ,IAAAA,CAAC,EAADA,CAAF;AAAKC,IAAAA,CAAC,EAADA;AAAL,GAAP;AACD;;AAEM,SAASN,gBAAT,CAA0BiK,KAA1B,EAAiC;AACtC,MAAI;AACF,QAAMC,IAAI,GAAG,CAACD,KAAK,CAAClJ,aAAN,IAAuBoJ,MAAM,CAACpJ,aAA/B,EAA8CqJ,OAA9C,CACX,WADW,CAAb;AAIA,QAAM9E,MAAM,GAAGO,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;AACAD,IAAAA,QAAQ,CAACe,IAAT,CAAcT,WAAd,CAA0Bb,MAA1B;AACAA,IAAAA,MAAM,CAACC,aAAP,CAAqBM,QAArB,CAA8BO,IAA9B;AACAd,IAAAA,MAAM,CAACC,aAAP,CAAqBM,QAArB,CAA8BQ,KAA9B,CAAoC6D,IAApC;AACA5E,IAAAA,MAAM,CAACC,aAAP,CAAqBM,QAArB,CAA8BW,KAA9B;AAEA,QAAM6D,GAAG,GAAG/E,MAAM,CAACC,aAAP,CAAqBM,QAArB,CAA8ByE,gBAA9B,CAA+C,IAA/C,CAAZ;AACA,QAAMtL,IAAI,GAAG,EAAb;AACAuI,IAAAA,KAAK,CAACC,SAAN,CAAgBP,OAAhB,CAAwBQ,IAAxB,CAA6B4C,GAA7B,EAAkC,UAACvD,EAAD,EAAKxG,CAAL,EAAW;AAC3C,UAAMiK,GAAG,GAAGzD,EAAE,CAACwD,gBAAH,CAAoB,IAApB,CAAZ;AACA/C,MAAAA,KAAK,CAACC,SAAN,CAAgBP,OAAhB,CAAwBQ,IAAxB,CAA6B8C,GAA7B,EAAkC,UAAC7G,EAAD,EAAKrD,CAAL,EAAW;AAC3C,YAAMmK,IAAI,GAAG9G,EAAE,CAACY,WAAhB;AACA,YAAI,CAACtF,IAAI,CAACsB,CAAD,CAAT,EAActB,IAAI,CAACsB,CAAD,CAAJ,GAAU,EAAV;AACdtB,QAAAA,IAAI,CAACsB,CAAD,CAAJ,CAAQD,CAAR,IAAamK,IAAb;AACD,OAJD;AAKD,KAPD;AASA3E,IAAAA,QAAQ,CAACe,IAAT,CAAc9C,WAAd,CAA0BwB,MAA1B;AACA,QAAItG,IAAI,CAACuB,MAAT,EAAiB,OAAOvB,IAAP;AAClB,GAxBD,CAwBE,OAAOY,CAAP,EAAU,CAAE;;AAEd,MAAM6K,QAAQ,GAAG,CAACR,KAAK,CAAClJ,aAAN,IAAuBoJ,MAAM,CAACpJ,aAA/B,EACdqJ,OADc,CACN,MADM,EAEdM,KAFc,CAER,YAFQ,EAGdxJ,GAHc,CAGV,UAACC,GAAD;AAAA,WAASA,GAAG,CAACuJ,KAAJ,CAAU,EAAV,CAAT;AAAA,GAHU,CAAjB;AAIA,SAAOD,QAAP;AACD;;IACY9K;;;;mCAEH;;;;;4BAEAU,GAAGC,GAAG2F,KAAK;AACjB,UAAM0E,IAAI,GAAG,KAAKhF,KAAlB;;AACA,UAAMiF,UAAU,GAAGC,SAAS,CAAC5E,GAAD,CAA5B;;AACA,UAAI2E,UAAJ,EAAgB;AACd,YAAI,CAACD,IAAI,CAACtK,CAAD,CAAT,EAAcsK,IAAI,CAACtK,CAAD,CAAJ,GAAU,EAAV;AACdsK,QAAAA,IAAI,CAACtK,CAAD,CAAJ,CAAQC,CAAR,IAAasK,UAAb;AACD,OAHD,MAGO;AACL;AACA,YAAID,IAAI,CAACtK,CAAD,CAAJ,IAAWsK,IAAI,CAACtK,CAAD,CAAJ,CAAQC,CAAR,CAAf,EAA2B;AACzB,iBAAOqK,IAAI,CAACtK,CAAD,CAAJ,CAAQC,CAAR,CAAP;AACA,cAAIwK,QAAQ,CAACH,IAAI,CAACtK,CAAD,CAAL,CAAZ,EAAuB,OAAOsK,IAAI,CAACtK,CAAD,CAAX;AACxB;AACF;AACF;;;6BAEQ;AACP,WAAKsF,KAAL,GAAa,EAAb;AACD;;;4BAEOtF,GAAGC,GAAG;AACZ,UAAMqK,IAAI,GAAG,KAAKhF,KAAlB;AACA,aAAQgF,IAAI,IAAIA,IAAI,CAACtK,CAAD,CAAZ,IAAmBsK,IAAI,CAACtK,CAAD,CAAJ,CAAQC,CAAR,CAApB,IAAmC,EAA1C;AACD;;;6BAEQ;AACP,UAAIb,KAAK,GAAG,CAAZ;AAAA,UACEC,MAAM,GAAG,CADX;;AAEA,WAAK,IAAIW,CAAT,IAAc,KAAKsF,KAAnB,EAA0B;AACxB,aAAK,IAAIrF,CAAT,IAAc,KAAKqF,KAAL,CAAWtF,CAAX,CAAd,EAA6B;AAC3BX,UAAAA,MAAM,GAAG0F,IAAI,CAAC2F,GAAL,CAASrL,MAAT,EAAiB+J,QAAQ,CAACnJ,CAAD,CAAR,GAAc,CAA/B,CAAT;AACAb,UAAAA,KAAK,GAAG2F,IAAI,CAAC2F,GAAL,CAAStL,KAAT,EAAgBgK,QAAQ,CAACpJ,CAAD,CAAR,GAAc,CAA9B,CAAR;AACD;AACF;;AACD,UAAMwH,MAAM,GAAG,EAAf;;AACA,WAAK,IAAIvH,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGZ,MAApB,EAA4BY,EAAC,EAA7B,EAAiC;AAC/BuH,QAAAA,MAAM,CAACC,IAAP,CAAY,EAAZ;;AACA,aAAK,IAAIzH,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGZ,KAApB,EAA2BY,EAAC,EAA5B,EAAgC;AAC9BwH,UAAAA,MAAM,CAACvH,EAAD,CAAN,CAAUwH,IAAV,CAAe,KAAKvD,OAAL,CAAalE,EAAb,EAAgBC,EAAhB,CAAf;AACD;AACF;;AACD,aAAOuH,MAAP;AACD;;;;;;;;AAGI,SAASgD,SAAT,CAAmB5E,GAAnB,EAAwB;AAC7B,MAAIA,GAAG,KAAK,CAAZ,EAAe,OAAO,GAAP;AACf,MAAI,CAACA,GAAL,EAAU,OAAO,EAAP;AACV,SAAOA,GAAG,CAACD,QAAJ,EAAP;AACD;;AAEM,SAAS8E,QAAT,CAAkBE,GAAlB,EAAuB;AAC5B,SAAOvE,MAAM,CAACwE,IAAP,CAAYD,GAAZ,EAAiBzK,MAAjB,KAA4B,CAAnC;AACD;;AACM,SAASU,UAAT,CAAoBiK,GAApB,EAAyB;AAC9B,MAAMvE,KAAK,GAAGd,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAd;AACAa,EAAAA,KAAK,CAACZ,YAAN,CAAmB,MAAnB,EAA2BO,SAAS,CAACC,QAArC;AACA2E,EAAAA,GAAG,CAACjE,OAAJ,CAAY,UAAC9F,GAAD,EAAS;AACnB,QAAM2F,EAAE,GAAGjB,QAAQ,CAACC,aAAT,CAAuB,IAAvB,CAAX;AACAa,IAAAA,KAAK,CAACR,WAAN,CAAkBW,EAAlB;AACA3F,IAAAA,GAAG,CAAC8F,OAAJ,CAAY,UAACkE,IAAD,EAAU;AACpB,UAAMzH,EAAE,GAAGmC,QAAQ,CAACC,aAAT,CAAuB,IAAvB,CAAX;AACAgB,MAAAA,EAAE,CAACX,WAAH,CAAezC,EAAf;AACAA,MAAAA,EAAE,CAACY,WAAH,GAAiB6G,IAAjB;AACD,KAJD;AAKD,GARD;AASA,gGAAoF7E,SAAS,CAACC,QAA9F,4HACgGI,KAAK,CAACyE,SADtG;AAED;;AACM,IAAMxG,WAAW,0zBAAjB;;;AEtzBP,IAAI0H,SAAS,GAAG,IAAhB;;AACA,SAASC,kBAAT,GAA8B;AAC5B,MAAI,CAACD,SAAL,EAAgB;AACdA,IAAAA,SAAS,GAAGE,YAAY,EAAxB;AACD;;AAED,SAAOF,SAAP;AACD;;AAED,SAASE,YAAT,GAAwB;AACtB;AACA,MAAI;AACF,UAAM,IAAI/H,KAAJ,EAAN;AACD,GAFD,CAEE,OAAOgI,GAAP,EAAY;AACZ,QAAIC,OAAO,GAAG,CAAC,KAAKD,GAAG,CAACE,KAAV,EAAiBT,KAAjB,CAAuB,+DAAvB,CAAd;;AACA,QAAIQ,OAAJ,EAAa;AACX,aAAOE,UAAU,CAACF,OAAO,CAAC,CAAD,CAAR,CAAjB;AACD;AACF;;AAED,SAAO,GAAP;AACD;;AAED,SAASE,UAAT,CAAoBC,GAApB,EAAyB;AACvB,SAAO,CAAC,KAAKA,GAAN,EAAWb,OAAX,CAAmB,sEAAnB,EAA2F,IAA3F,IAAmG,GAA1G;AACD;;AAEDc,OAAO,CAACN,YAAR,GAAuBD,kBAAvB;AACAO,OAAO,CAACF,UAAR,GAAqBA,UAArB;;AC5BA,IAAIG,MAAM,GAAGC,OAAO,CAAC,cAAD,CAApB;;AAEA,SAASC,UAAT,CAAoBC,IAApB,EAA0B;AACxB,MAAIC,OAAO,GAAGD,IAAI,CAACE,SAAL,EAAd;;AACAD,EAAAA,OAAO,CAACE,MAAR,GAAiB,YAAY;AAC3BH,IAAAA,IAAI,CAACI,MAAL;AACD,GAFD;;AAGAH,EAAAA,OAAO,CAACI,IAAR,GAAeL,IAAI,CAACK,IAAL,CAAU7C,KAAV,CAAgB,GAAhB,EAAqB,CAArB,IAA0B,GAA1B,GAAgCrH,IAAI,CAACC,GAAL,EAA/C;AACA4J,EAAAA,IAAI,CAACM,UAAL,CAAgBC,YAAhB,CAA6BN,OAA7B,EAAsCD,IAAI,CAACQ,WAA3C;AACD;;AAED,IAAIC,UAAU,GAAG,IAAjB;;AACA,SAASC,SAAT,GAAqB;AACnB,MAAID,UAAJ,EAAgB;AACd;AACD;;AAEDA,EAAAA,UAAU,GAAGE,UAAU,CAAC,YAAY;AAClC,QAAIC,KAAK,GAAGjI,QAAQ,CAACyE,gBAAT,CAA0B,wBAA1B,CAAZ;;AACA,SAAK,IAAI8B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0B,KAAK,CAACvN,MAA1B,EAAkC6L,CAAC,EAAnC,EAAuC;AACrC,UAAIW,MAAM,CAACH,UAAP,CAAkBkB,KAAK,CAAC1B,CAAD,CAAL,CAASmB,IAA3B,MAAqCR,MAAM,CAACP,YAAP,EAAzC,EAAgE;AAC9DS,QAAAA,UAAU,CAACa,KAAK,CAAC1B,CAAD,CAAN,CAAV;AACD;AACF;;AAEDuB,IAAAA,UAAU,GAAG,IAAb;AACD,GATsB,EASpB,EAToB,CAAvB;AAUD;;AAEDI,MAAM,CAACjB,OAAP,GAAiBc,SAAjB;;;;;;;;;AF7BA;;AACA;;;;AAEAzD,MAAM,CAACkB,KAAP,GAAe,IAAIC,cAAJ,CAAiB;AAC9BtM,EAAAA,IAAI,EAAE,CACJ,CAAC,YAAD,EAAe,cAAf,EAA+B,OAA/B,EAAwC,MAAxC,EAAgD,UAAhD,CADI,EAEJ,CAAC,KAAD,EAAQ,gBAAR,EAA0B,KAA1B,EAAiC,OAAjC,EAA0C,QAA1C,CAFI,EAGJ,CAAC,KAAD,EAAQ,eAAR,EAAyB,GAAzB,EAA8B,QAA9B,EAAwC,QAAxC,CAHI,CADwB;AAM9BC,EAAAA,IAAI,EAAE4G,QAAQ,CAAC0F,cAAT,CAAwB,YAAxB,CANwB;AAO9BhM,EAAAA,OAAO,EAAE;AAPqB,CAAjB,CAAf;AAUAiM,OAAO,CAACC,IAAR;AAUAlE,KAAK,CAACC,SAAN,CAAgBP,OAAhB,CAAwBQ,IAAxB,CACE5B,QAAQ,CAAC6F,sBAAT,CAAgC,UAAhC,CADF,EAEE,UAACC,CAAD,EAAO;AACL,MAAMC,GAAG,GAAG/F,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAZ;AACA8F,EAAAA,GAAG,CAAC1H,SAAJ,GAAgB,MAAhB;AAEA,MAAI2H,EAAE,GAAGF,CAAC,CAACG,SAAF,CACNC,IADM,GAENC,OAFM,CAEE,wBAFF,EAE4B,qBAF5B,EAGNA,OAHM,CAGE,uBAHF,EAG2B,kCAH3B,CAAT;AAKA,MAAMC,KAAK,GAAGJ,EAAE,CAACnB,KAAH,CAAS,IAAT,CAAd;AACA,MAAMtK,MAAM,GAAG6L,KAAK,CAAC,CAAD,CAAL,CAASC,KAAT,CAAe,IAAf,EAAqB,CAArB,EAAwB3L,MAAvC;AACAsL,EAAAA,EAAE,GAAGI,KAAK,CACP/K,GADE,CACE,UAACiL,CAAD,EAAIC,CAAJ;AAAA,WACHA,CAAC,GAAID,CAAC,CAACE,KAAF,CAAQ,CAAR,EAAWjM,MAAX,EAAmB2L,IAAnB,KAA4BI,CAAC,CAACJ,IAAF,EAA5B,GAAuCI,CAAC,CAACE,KAAF,CAAQjM,MAAR,CAA3C,GAA8D+L,CAD5D;AAAA,GADF,EAIF/K,IAJE,CAIG,IAJH,CAAL;AAMAwK,EAAAA,GAAG,CAACE,SAAJ,GAAgBD,EAAhB;AAEAF,EAAAA,CAAC,CAACtE,aAAF,CAAgBlB,WAAhB,CAA4ByF,GAA5B;AACD,CAtBH;;;AGvBA,IAAIoC,UAAU,GAAG,4BAAjB;AAEA,IAAIC,SAAS,GAAGF,MAAM,CAAChB,MAAP,CAAcmB,MAA9B;;AAEA,SAASA,MAAT,CAAgBC,UAAhB,EAA4B;AAC1BF,EAAAA,SAAS,CAACxG,IAAV,CAAe,IAAf,EAAqB0G,UAArB;AACA,OAAKC,GAAL,GAAW;AACTpP,IAAAA,IAAI,EAAE+O,MAAM,CAAChB,MAAP,CAAcsB,OADX;AAETC,IAAAA,gBAAgB,EAAE,EAFT;AAGTC,IAAAA,iBAAiB,EAAE,EAHV;AAITC,IAAAA,MAAM,EAAE,UAAUC,EAAV,EAAc;AACpB,WAAKH,gBAAL,CAAsBxG,IAAtB,CAA2B2G,EAAE,IAAI,YAAY,CAAE,CAA/C;AACD,KANQ;AAOTC,IAAAA,OAAO,EAAE,UAAUD,EAAV,EAAc;AACrB,WAAKF,iBAAL,CAAuBzG,IAAvB,CAA4B2G,EAA5B;AACD;AATQ,GAAX;AAYAV,EAAAA,MAAM,CAAChB,MAAP,CAAcsB,OAAd,GAAwB,IAAxB;AACD;;AAEDN,MAAM,CAAChB,MAAP,CAAcmB,MAAd,GAAuBA,MAAvB;AACA,IAAIS,aAAJ,EAAmBC,cAAnB;AAEA,IAAIC,MAAM,GAAGd,MAAM,CAAChB,MAAP,CAAc8B,MAA3B;;AACA,IAAI,CAAC,CAACA,MAAD,IAAW,CAACA,MAAM,CAACC,eAApB,KAAwC,OAAOC,SAAP,KAAqB,WAAjE,EAA8E;AAC5E,MAAIC,QAAQ,GAAG,MAA4BC,QAAQ,CAACD,QAApD;AACA,MAAIE,QAAQ,GAAGD,QAAQ,CAACC,QAAT,KAAsB,QAAtB,GAAiC,KAAjC,GAAyC,IAAxD;AACA,MAAIC,EAAE,GAAG,IAAIJ,SAAJ,CAAcG,QAAQ,GAAG,KAAX,GAAmBF,QAAnB,GAA8B,GAA9B,aAA2D,GAAzE,CAAT;;AACAG,EAAAA,EAAE,CAACC,SAAH,GAAe,UAASnF,KAAT,EAAgB;AAC7B0E,IAAAA,aAAa,GAAG,EAAhB;AACAC,IAAAA,cAAc,GAAG,EAAjB;AAEA,QAAI5P,IAAI,GAAGqQ,IAAI,CAACC,KAAL,CAAWrF,KAAK,CAACjL,IAAjB,CAAX;;AAEA,QAAIA,IAAI,CAACgK,IAAL,KAAc,QAAlB,EAA4B;AAC1B,UAAIuG,OAAO,GAAG,KAAd;AACAvQ,MAAAA,IAAI,CAACwQ,MAAL,CAAYvI,OAAZ,CAAoB,UAASwI,KAAT,EAAgB;AAClC,YAAI,CAACA,KAAK,CAACC,KAAX,EAAkB;AAChB,cAAIC,SAAS,GAAGC,cAAc,CAACC,MAAM,CAACC,aAAR,EAAuBL,KAAK,CAACM,EAA7B,CAA9B;;AACA,cAAIJ,SAAJ,EAAe;AACbJ,YAAAA,OAAO,GAAG,IAAV;AACD;AACF;AACF,OAPD,EAF0B,CAW1B;;AACAA,MAAAA,OAAO,GAAGA,OAAO,IAAIvQ,IAAI,CAACwQ,MAAL,CAAYQ,KAAZ,CAAkB,UAASP,KAAT,EAAgB;AACrD,eAAOA,KAAK,CAACzG,IAAN,KAAe,KAAf,IAAwByG,KAAK,CAACQ,SAAN,CAAgBpE,EAA/C;AACD,OAFoB,CAArB;;AAIA,UAAI0D,OAAJ,EAAa;AACX/D,QAAAA,OAAO,CAAC0E,KAAR;AAEAlR,QAAAA,IAAI,CAACwQ,MAAL,CAAYvI,OAAZ,CAAoB,UAAUwI,KAAV,EAAiB;AACnCU,UAAAA,QAAQ,CAACN,MAAM,CAACC,aAAR,EAAuBL,KAAvB,CAAR;AACD,SAFD;AAIAb,QAAAA,cAAc,CAAC3H,OAAf,CAAuB,UAAUmJ,CAAV,EAAa;AAClCC,UAAAA,YAAY,CAACD,CAAC,CAAC,CAAD,CAAF,EAAOA,CAAC,CAAC,CAAD,CAAR,CAAZ;AACD,SAFD;AAGD,OAVD,MAUO,IAAInB,QAAQ,CAACqB,MAAb,EAAqB;AAAE;AAC5BrB,QAAAA,QAAQ,CAACqB,MAAT;AACD;AACF;;AAED,QAAItR,IAAI,CAACgK,IAAL,KAAc,QAAlB,EAA4B;AAC1BmG,MAAAA,EAAE,CAAC3I,KAAH;;AACA2I,MAAAA,EAAE,CAACoB,OAAH,GAAa,YAAY;AACvBtB,QAAAA,QAAQ,CAACqB,MAAT;AACD,OAFD;AAGD;;AAED,QAAItR,IAAI,CAACgK,IAAL,KAAc,gBAAlB,EAAoC;AAClCwC,MAAAA,OAAO,CAACgF,GAAR,CAAY,2BAAZ;AAEAC,MAAAA,kBAAkB;AACnB;;AAED,QAAIzR,IAAI,CAACgK,IAAL,KAAc,OAAlB,EAA2B;AACzBwC,MAAAA,OAAO,CAACkF,KAAR,CAAc,kBAAkB1R,IAAI,CAAC0R,KAAL,CAAWC,OAA7B,GAAuC,IAAvC,GAA8C3R,IAAI,CAAC0R,KAAL,CAAW/D,KAAvE;AAEA8D,MAAAA,kBAAkB;AAElB,UAAIG,OAAO,GAAGC,kBAAkB,CAAC7R,IAAD,CAAhC;AACA6G,MAAAA,QAAQ,CAACe,IAAT,CAAcT,WAAd,CAA0ByK,OAA1B;AACD;AACF,GA1DD;AA2DD;;AAED,SAASH,kBAAT,GAA8B;AAC5B,MAAIG,OAAO,GAAG/K,QAAQ,CAAC0F,cAAT,CAAwByC,UAAxB,CAAd;;AACA,MAAI4C,OAAJ,EAAa;AACXA,IAAAA,OAAO,CAACtD,MAAR;AACD;AACF;;AAED,SAASuD,kBAAT,CAA4B7R,IAA5B,EAAkC;AAChC,MAAI4R,OAAO,GAAG/K,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAd;AACA8K,EAAAA,OAAO,CAACb,EAAR,GAAa/B,UAAb,CAFgC,CAIhC;;AACA,MAAI2C,OAAO,GAAG9K,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAd;AACA,MAAIgL,UAAU,GAAGjL,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAjB;AACA6K,EAAAA,OAAO,CAAC7E,SAAR,GAAoB9M,IAAI,CAAC0R,KAAL,CAAWC,OAA/B;AACAG,EAAAA,UAAU,CAAChF,SAAX,GAAuB9M,IAAI,CAAC0R,KAAL,CAAW/D,KAAlC;AAEAiE,EAAAA,OAAO,CAAC1K,SAAR,GACE,2NACE,mFADF,GAEE,yEAFF,GAGE,qEAHF,GAG0EyK,OAAO,CAACzK,SAHlF,GAG8F,QAH9F,GAIE,OAJF,GAIY4K,UAAU,CAAC5K,SAJvB,GAImC,QAJnC,GAKA,QANF;AASA,SAAO0K,OAAP;AAED;;AAED,SAASG,UAAT,CAAoBhE,MAApB,EAA4BgD,EAA5B,EAAgC;AAC9B,MAAIiB,OAAO,GAAGjE,MAAM,CAACiE,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ,WAAO,EAAP;AACD;;AAED,MAAIC,OAAO,GAAG,EAAd;AACA,MAAIC,CAAJ,EAAOC,CAAP,EAAUC,GAAV;;AAEA,OAAKF,CAAL,IAAUF,OAAV,EAAmB;AACjB,SAAKG,CAAL,IAAUH,OAAO,CAACE,CAAD,CAAP,CAAW,CAAX,CAAV,EAAyB;AACvBE,MAAAA,GAAG,GAAGJ,OAAO,CAACE,CAAD,CAAP,CAAW,CAAX,EAAcC,CAAd,CAAN;;AACA,UAAIC,GAAG,KAAKrB,EAAR,IAAexI,KAAK,CAAC8J,OAAN,CAAcD,GAAd,KAAsBA,GAAG,CAACA,GAAG,CAAC7Q,MAAJ,GAAa,CAAd,CAAH,KAAwBwP,EAAjE,EAAsE;AACpEkB,QAAAA,OAAO,CAACnJ,IAAR,CAAaoJ,CAAb;AACD;AACF;AACF;;AAED,MAAInE,MAAM,CAAC8B,MAAX,EAAmB;AACjBoC,IAAAA,OAAO,GAAGA,OAAO,CAACK,MAAR,CAAeP,UAAU,CAAChE,MAAM,CAAC8B,MAAR,EAAgBkB,EAAhB,CAAzB,CAAV;AACD;;AAED,SAAOkB,OAAP;AACD;;AAED,SAASd,QAAT,CAAkBpD,MAAlB,EAA0B0C,KAA1B,EAAiC;AAC/B,MAAIuB,OAAO,GAAGjE,MAAM,CAACiE,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ;AACD;;AAED,MAAIA,OAAO,CAACvB,KAAK,CAACM,EAAP,CAAP,IAAqB,CAAChD,MAAM,CAAC8B,MAAjC,EAAyC;AACvC,QAAIJ,EAAE,GAAG,IAAI8C,QAAJ,CAAa,SAAb,EAAwB,QAAxB,EAAkC,SAAlC,EAA6C9B,KAAK,CAACQ,SAAN,CAAgBpE,EAA7D,CAAT;AACA4D,IAAAA,KAAK,CAACC,KAAN,GAAc,CAACsB,OAAO,CAACvB,KAAK,CAACM,EAAP,CAAtB;AACAiB,IAAAA,OAAO,CAACvB,KAAK,CAACM,EAAP,CAAP,GAAoB,CAACtB,EAAD,EAAKgB,KAAK,CAAC+B,IAAX,CAApB;AACD,GAJD,MAIO,IAAIzE,MAAM,CAAC8B,MAAX,EAAmB;AACxBsB,IAAAA,QAAQ,CAACpD,MAAM,CAAC8B,MAAR,EAAgBY,KAAhB,CAAR;AACD;AACF;;AAED,SAASG,cAAT,CAAwB7C,MAAxB,EAAgCgD,EAAhC,EAAoC;AAClC,MAAIiB,OAAO,GAAGjE,MAAM,CAACiE,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ;AACD;;AAED,MAAI,CAACA,OAAO,CAACjB,EAAD,CAAR,IAAgBhD,MAAM,CAAC8B,MAA3B,EAAmC;AACjC,WAAOe,cAAc,CAAC7C,MAAM,CAAC8B,MAAR,EAAgBkB,EAAhB,CAArB;AACD;;AAED,MAAIpB,aAAa,CAACoB,EAAD,CAAjB,EAAuB;AACrB;AACD;;AACDpB,EAAAA,aAAa,CAACoB,EAAD,CAAb,GAAoB,IAApB;AAEA,MAAI0B,MAAM,GAAG1E,MAAM,CAAC2E,KAAP,CAAa3B,EAAb,CAAb;AAEAnB,EAAAA,cAAc,CAAC9G,IAAf,CAAoB,CAACiF,MAAD,EAASgD,EAAT,CAApB;;AAEA,MAAI0B,MAAM,IAAIA,MAAM,CAACrD,GAAjB,IAAwBqD,MAAM,CAACrD,GAAP,CAAWE,gBAAX,CAA4B/N,MAAxD,EAAgE;AAC9D,WAAO,IAAP;AACD;;AAED,SAAOwQ,UAAU,CAAClB,MAAM,CAACC,aAAR,EAAuBC,EAAvB,CAAV,CAAqC4B,IAArC,CAA0C,UAAU5B,EAAV,EAAc;AAC7D,WAAOH,cAAc,CAACC,MAAM,CAACC,aAAR,EAAuBC,EAAvB,CAArB;AACD,GAFM,CAAP;AAGD;;AAED,SAASM,YAAT,CAAsBtD,MAAtB,EAA8BgD,EAA9B,EAAkC;AAChC,MAAI0B,MAAM,GAAG1E,MAAM,CAAC2E,KAAP,CAAa3B,EAAb,CAAb;AACAhD,EAAAA,MAAM,CAACsB,OAAP,GAAiB,EAAjB;;AACA,MAAIoD,MAAJ,EAAY;AACVA,IAAAA,MAAM,CAACrD,GAAP,CAAWpP,IAAX,GAAkB+N,MAAM,CAACsB,OAAzB;AACD;;AAED,MAAIoD,MAAM,IAAIA,MAAM,CAACrD,GAAjB,IAAwBqD,MAAM,CAACrD,GAAP,CAAWG,iBAAX,CAA6BhO,MAAzD,EAAiE;AAC/DkR,IAAAA,MAAM,CAACrD,GAAP,CAAWG,iBAAX,CAA6BtH,OAA7B,CAAqC,UAAUqC,EAAV,EAAc;AACjDA,MAAAA,EAAE,CAACyD,MAAM,CAACsB,OAAR,CAAF;AACD,KAFD;AAGD;;AAED,SAAOtB,MAAM,CAAC2E,KAAP,CAAa3B,EAAb,CAAP;AACAhD,EAAAA,MAAM,CAACgD,EAAD,CAAN;AAEA0B,EAAAA,MAAM,GAAG1E,MAAM,CAAC2E,KAAP,CAAa3B,EAAb,CAAT;;AACA,MAAI0B,MAAM,IAAIA,MAAM,CAACrD,GAAjB,IAAwBqD,MAAM,CAACrD,GAAP,CAAWE,gBAAX,CAA4B/N,MAAxD,EAAgE;AAC9DkR,IAAAA,MAAM,CAACrD,GAAP,CAAWE,gBAAX,CAA4BrH,OAA5B,CAAoC,UAAUqC,EAAV,EAAc;AAChDA,MAAAA,EAAE;AACH,KAFD;;AAGA,WAAO,IAAP;AACD;AACF","file":"demo.d3b53871.js","sourceRoot":"../demo","sourcesContent":["/** @private All the events we listen to inside the iframe at the root level.\n * Each one is mapped to the corresponding method on the instance. */\nconst _events = [\n  \"mousedown\",\n  \"mouseenter\",\n  \"mouseup\",\n  \"mouseleave\",\n  \"touchstart\",\n  \"touchend\",\n  \"touchmove\",\n  \"keydown\",\n  \"paste\",\n  \"cut\",\n  \"copy\",\n];\n\n/**\n * Spreadsheet component\n * @param {Object} options\n * @param {Array} options.data Initial data of the table, ie [['A1','A2'],['B1','B2']]\n * @param {Node} options.node Dom node to create the table into\n * @param {Node} options.onChange Callback to run whenever the data\n *               has changed, receives the new data as an argument.\n *@param {Number} options.minRows Minimum number of rows.\n *@param {Number} options.maxRows Maximum number of rows, the table will not grow vertically beyond this.\n *@param {Number} options.minCols Minimum number of columns.\n *@param {Number} options.maxCols Maximum number of columns, the table will not grow horizontally beyond this.\n *@param {String} options.css Css code to add inside the iframe.\n *\n *@param {Object} options.width Width of the iframe that will contain the table.\n *@param {Object} options.height Height of the iframe that will contain the table.\n *\n */\nexport default class _Importabular {\n  constructor({\n    data = [],\n    node = null,\n    onChange = null,\n    minRows = 1,\n    maxRows = Infinity,\n    minCols = 1,\n    maxCols = Infinity,\n    css = \"\",\n    width = \"100%\",\n    height = \"80vh\",\n  }) {\n    if (!node) {\n      throw new Error(\n        \"You need to pass a node argument to Importabular, like this : new Importabular({node: document.body})\"\n      );\n    }\n    // Reference to the parent DOM element, contains the iframe\n    this._parent = node;\n    this._options = {\n      onChange,\n      minRows,\n      maxRows,\n      minCols,\n      maxCols,\n      css: _defaultCss + css,\n    };\n    this._iframeStyle = {\n      width,\n      height,\n      border: \"none\",\n      background: \"transparent\",\n    };\n\n    this._setupDom();\n    this._replaceDataWithArray(data);\n    this._incrementToFit({\n      x: this._options.minCols - 1,\n      y: this._options.minRows - 1,\n    });\n    this._fillScrollSpace();\n  }\n\n  /** @private {Number} Current number of columns of the table. */\n  _width = 1;\n\n  /** @private {Number} Current number of rows of the table. */\n  _height = 1;\n\n  /** @private {_LooseArray} Current content of the table, stored as 2D map.*/\n  _data = new _LooseArray();\n\n  /** @private Checks whether this cell should be editable, or if it's out of bounds*/\n  _fitBounds({ x, y }) {\n    return (\n      x >= 0 && x < this._options.maxCols && y >= 0 && y < this._options.maxRows\n    );\n  }\n\n  /** @private Fill the iframe visible window with empty cells*/\n  _fillScrollSpace() {\n    const rows = Math.ceil(this.iframe.contentWindow.innerHeight / 40);\n    const cols = Math.ceil(this.iframe.contentWindow.innerWidth / 100);\n    this._incrementToFit({ x: cols - 1, y: rows - 1 });\n  }\n\n  /** @private Runs the onchange callback*/\n  _onDataChanged() {\n    if (this._options.onChange) this._options.onChange(this._data._toArr());\n  }\n\n  /** @private Create a div with the cell content and correct style */\n  _renderTDContent(td, x, y) {\n    const div = document.createElement(\"div\");\n    td.setAttribute(\"x\", x.toString());\n    td.setAttribute(\"y\", y.toString());\n    const val = this._getVal(x, y);\n    if (val) {\n      div.textContent = val;\n    } else {\n      // Force no collapse of cell\n      div.innerHTML = \"&nbsp;\";\n    }\n    td.appendChild(div);\n    this._restyle({ x, y });\n  }\n\n  /** @private Initial dom setup */\n  _setupDom() {\n    // We wrap the table in an iframe mostly to let the browser\n    // handle the focus for us, without the need for a hidden\n    // input. It also makes sure that the style of the table is \"clean\"\n    // but makes it harder to style the content.\n    const iframe = document.createElement(\"iframe\");\n    this.iframe = iframe;\n    this._parent.appendChild(iframe);\n    const cwd = iframe.contentWindow.document;\n    this.cwd = cwd;\n    cwd.open();\n    cwd.write(\n      `<html lang=\"${navigator.language}\"><body><style>${this._options.css}</style></body></html>`\n    );\n    cwd.close();\n    Object.assign(iframe.style, this._iframeStyle);\n\n    const table = document.createElement(\"table\");\n    const tbody = document.createElement(\"tbody\");\n\n    table.appendChild(tbody);\n    cwd.body.appendChild(table);\n    this.tbody = tbody;\n    this.table = table;\n\n    for (let y = 0; y < this._height; y++) {\n      const tr = document.createElement(\"tr\");\n      tbody.appendChild(tr);\n      for (let x = 0; x < this._width; x++) {\n        this._addCell(tr, x, y);\n      }\n    }\n\n    _events.forEach((name) => cwd.addEventListener(name, this[name], true));\n  }\n\n  /** Destroys the table, and clears even listeners\n   * @public\n   * */\n  destroy() {\n    this._destroyEditing();\n\n    _events.forEach((name) =>\n      this.cwd.removeEventListener(name, this[name], true)\n    );\n\n    this.iframe.parentElement.removeChild(this.iframe);\n  }\n\n  /** @private Creates a TD, sets its content and adds it to the TR */\n  _addCell(tr, x, y) {\n    const td = document.createElement(\"td\");\n    tr.appendChild(td);\n    this._renderTDContent(td, x, y);\n  }\n\n  _incrementHeight() {\n    if (!this._fitBounds({ x: 0, y: this._height })) return false;\n    this._height++;\n    const y = this._height - 1;\n    const tr = document.createElement(\"tr\");\n\n    this.tbody.appendChild(tr);\n    for (let x = 0; x < this._width; x++) {\n      this._addCell(tr, x, y);\n    }\n    return true;\n  }\n\n  _incrementWidth() {\n    if (!this._fitBounds({ x: this._width, y: 0 })) return false;\n    this._width++;\n    const x = this._width - 1;\n    Array.prototype.forEach.call(this.tbody.children, (tr, y) => {\n      this._addCell(tr, x, y);\n    });\n    return true;\n  }\n  /** @private Makes the table bigger to contain a cell for those coordinates*/\n  _incrementToFit({ x, y }) {\n    while (x > this._width - 1 && this._incrementWidth());\n    while (y > this._height - 1 && this._incrementHeight());\n  }\n\n  /** @private Handles the paste event on the node.*/\n  paste = (e) => {\n    if (this._editing) return;\n    e.preventDefault();\n    const rows = _parsePasteEvent(e);\n    const { rx, ry } = this._selection;\n    const offset = { x: rx[0], y: ry[0] };\n\n    for (let y = 0; y < rows.length; y++)\n      // Using the first column here makes sure that\n      // if the paste data had various row length, we only\n      // paste a clean rectangle\n      for (let x = 0; x < rows[0].length; x++)\n        this._setVal(offset.x + x, offset.y + y, rows[y][x]);\n\n    this._changeSelectedCellsStyle(() => {\n      this._selectionStart = offset;\n      this._selectionEnd = {\n        x: offset.x + rows[0].length - 1,\n        y: offset.y + rows.length - 1,\n      };\n    });\n    this._onDataChanged();\n  };\n\n  /** @private Returns the currently selected cells as a 2D array of strings.*/\n  _getSelectionAsArray() {\n    const { rx, ry } = this._selection;\n    if (rx[0] === rx[1]) return null;\n    const width = rx[1] - rx[0];\n    const height = ry[1] - ry[0];\n    const result = [];\n    for (let y = 0; y < height; y++) {\n      result.push([]);\n      for (let x = 0; x < width; x++) {\n        result[y].push(this._getVal(rx[0] + x, ry[0] + y));\n      }\n    }\n    return result;\n  }\n\n  /** @private Called when the copy even happens in the iframe.*/\n  copy = (e) => {\n    if (this._editing) return;\n    const asArr = this._getSelectionAsArray();\n    if (asArr) {\n      e.preventDefault();\n      e.clipboardData.setData(\"text/html\", _arrToHTML(asArr));\n      e.clipboardData.setData(\n        \"text/plain\",\n        asArr.map((row) => row.join(\"\")).join(\"\\n\")\n      );\n    }\n  };\n\n  /** @private Called when the cut even happens in the iframe.\n   * Runs the copy method and then clears the cells.\n   * */\n  cut = (e) => {\n    if (this._editing) return;\n    this.copy(e);\n    this._setAllSelectedCellsTo(\"\");\n  };\n\n  keydown = (e) => {\n    if (e.ctrlKey) return;\n\n    if (this._selectionStart) {\n      if (e.key === \"Escape\" && this._editing) {\n        e.preventDefault();\n        this._revertEdit();\n        this._stopEditing();\n      }\n      if (e.key === \"Enter\") {\n        e.preventDefault();\n        this._tabCursorInSelection(false, e.shiftKey ? -1 : 1);\n      }\n\n      if (e.key === \"Tab\") {\n        e.preventDefault();\n        this._tabCursorInSelection(true, e.shiftKey ? -1 : 1);\n      }\n      if (!this._editing) {\n        if (e.key === \"Delete\" || e.key === \"Backspace\") {\n          e.preventDefault();\n          this._setAllSelectedCellsTo(\"\");\n        }\n        if (e.key === \"ArrowDown\") {\n          e.preventDefault();\n          this._moveCursor({ y: 1 }, e.shiftKey);\n        }\n\n        if (e.key === \"ArrowUp\") {\n          e.preventDefault();\n          this._moveCursor({ y: -1 }, e.shiftKey);\n        }\n        if (e.key === \"ArrowLeft\") {\n          e.preventDefault();\n          this._moveCursor({ x: -1 }, e.shiftKey);\n        }\n        if (e.key === \"ArrowRight\") {\n          e.preventDefault();\n          this._moveCursor({ x: +1 }, e.shiftKey);\n        }\n      }\n\n      if (e.key.length === 1 && !this._editing) {\n        this._changeSelectedCellsStyle(() => {\n          const { x, y } = this._focus;\n          // We clear the value of the cell, and the keyup event will\n          // happen with the cursor inside the cell and type the character there\n          this._startEditing({ x, y });\n          this._getCell(x, y).firstChild.value = \"\";\n        });\n      }\n    }\n  };\n\n  _setAllSelectedCellsTo(value) {\n    this._forSelectionCoord(this._selection, ({ x, y }) =>\n      this._setVal(x, y, value)\n    );\n    this._forSelectionCoord(this._selection, this._refreshDisplayedValue);\n\n    this._onDataChanged();\n  }\n\n  _moveCursor({ x = 0, y = 0 }, shiftSelectionEnd) {\n    const curr = shiftSelectionEnd ? this._selectionEnd : this._selectionStart;\n    const nc = { x: curr.x + x, y: curr.y + y };\n    if (!this._fitBounds(nc)) return;\n    this._stopEditing();\n    this._incrementToFit(nc);\n    this._changeSelectedCellsStyle(() => {\n      if (shiftSelectionEnd) {\n        this._selectionEnd = nc;\n      } else {\n        this._selectionStart = this._selectionEnd = this._focus = nc;\n      }\n    });\n    this._scrollIntoView(nc);\n  }\n\n  _tabCursorInSelection(horizontal, delta = 1) {\n    // if (this._selectionSize() <= 1) {\n    //   return this._moveCursor(horizontal? { x: delta, y: 0 }:{ x:0, y: delta });\n    // }\n    let { x, y } = this._focus || { x: 0, y: 0 };\n    const selectionSize = this._selectionSize();\n    const { rx, ry } =\n      selectionSize > 1\n        ? this._selection\n        : {\n            rx: [0, this._options.maxCols],\n            ry: [0, this._options.maxRows],\n          };\n\n    let nc;\n    if (horizontal) {\n      nc = _shift(x, y, delta, rx[0], rx[1] - 1, ry[0], ry[1] - 1);\n    } else {\n      // use the same logic, but with x and y inverted for the horizontal tabbing wiht enter/ shift enter\n      const temporaryCursor = _shift(\n        y,\n        x,\n        delta,\n        ry[0],\n        ry[1] - 1,\n        rx[0],\n        rx[1] - 1\n      );\n      nc = {\n        x: temporaryCursor.y,\n        y: temporaryCursor.x,\n      };\n    }\n\n    if (!this._fitBounds(nc)) return;\n    this._stopEditing();\n    this._incrementToFit(nc);\n    this._changeSelectedCellsStyle(() => {\n      this._focus = nc;\n      if (selectionSize <= 1) {\n        this._selectionStart = this._selectionEnd = nc;\n      }\n    });\n    this._scrollIntoView(nc);\n  }\n\n  _scrollIntoView({ x, y }) {\n    this._getCell(x, y).scrollIntoView({\n      behavior: \"smooth\",\n      block: \"nearest\",\n    });\n  }\n\n  _selecting = false;\n  _selectionStart = null;\n  _selectionEnd = null;\n  _selection = { rx: [0, 0], ry: [0, 0] };\n  _editing = null;\n  _focus = null;\n\n  mousedown = (e) => {\n    if (this.mobile) return;\n    if (e.which === 3 && !this._editing && this._selectionSize()) {\n      // select some text to make the browser offer the copy option\n      let range = new Range();\n      const { rx, ry } = this._selection;\n      range.setStart(this._getCell(rx[0], ry[0]), 0);\n      range.setEnd(this._getCell(rx[0], ry[0]), 1);\n      this.cwd.getSelection().removeAllRanges();\n      this.cwd.getSelection().addRange(range);\n\n      return;\n    }\n    this._changeSelectedCellsStyle(() => {\n      this.tbody.style.userSelect = \"none\";\n      this._selectionEnd = this._selectionStart = this._focus = this._getCoords(\n        e\n      );\n      this._selecting = true;\n    });\n  };\n  mouseenter = (e) => {\n    if (this.mobile) return;\n    if (this._selecting) {\n      this._changeSelectedCellsStyle(() => {\n        this._selectionEnd = this._getCoords(e);\n      });\n    }\n  };\n\n  _lastMouseUp = null;\n  _lastMouseUpTarget = null;\n\n  _endSelection() {\n    this._selecting = false;\n    this.tbody.style.userSelect = \"\";\n  }\n\n  mouseup = (e) => {\n    if (this.mobile) return;\n    if (e.which === 3) return;\n\n    if (this._selecting) {\n      this._changeSelectedCellsStyle(() => {\n        this._selectionEnd = this._getCoords(e);\n        this._endSelection();\n\n        if (\n          this._lastMouseUp &&\n          this._lastMouseUp > Date.now() - 300 &&\n          this._lastMouseUpTarget.x === this._selectionEnd.x &&\n          this._lastMouseUpTarget.y === this._selectionEnd.y\n        ) {\n          this._startEditing(this._selectionEnd);\n        }\n        this._lastMouseUp = Date.now();\n        this._lastMouseUpTarget = this._selectionEnd;\n      });\n    }\n  };\n  mouseleave = (e) => {\n    if (e.target === this.tbody && this._selecting) {\n      this._endSelection();\n    }\n  };\n\n  touchstart = (e) => {\n    if (this._editing) return;\n    this.mobile = true;\n    this.moved = false;\n  };\n  touchend = (e) => {\n    if (!this.mobile) return;\n    if (this._editing) return;\n    if (!this.moved) {\n      this._changeSelectedCellsStyle(() => {\n        this._selectionEnd = this._selectionStart = this._focus = this._getCoords(\n          e\n        );\n      });\n      this._startEditing(this._focus);\n    }\n  };\n  touchmove = (e) => {\n    if (!this.mobile) return;\n    this.moved = true;\n  };\n\n  _startEditing({ x, y }) {\n    this._editing = { x, y };\n    const td = this._getCell(x, y);\n\n    // Measure the current content\n    const tdSize = td.getBoundingClientRect();\n    const cellSize = td.firstChild.getBoundingClientRect();\n\n    // remove the current content\n    td.removeChild(td.firstChild);\n\n    // add the input\n    const input = document.createElement(\"input\");\n    input.type = \"text\";\n    input.value = this._getVal(x, y);\n    td.appendChild(input);\n\n    // Make the new content fit the past size\n    Object.assign(td.style, {\n      width: tdSize.width-2,\n      height: tdSize.height,\n    });\n\n    Object.assign(input.style, {\n      width: `${cellSize.width}px`,\n      height: `${cellSize.height}px`,\n    });\n\n    input.focus();\n    input.addEventListener(\"blur\", this._stopEditing);\n    input.addEventListener(\"keydown\", this._blurIfEnter);\n  }\n\n  _destroyEditing() {\n    if (this._editing) {\n      const { x, y } = this._editing;\n      const input = this._getCell(x, y).firstChild;\n      input.removeEventListener(\"blur\", this._stopEditing);\n      input.removeEventListener(\"keydown\", this._blurIfEnter);\n    }\n  }\n\n  _revertEdit() {\n    if (!this._editing) return;\n    const { x, y } = this._editing;\n    const td = this._getCell(x, y);\n    const input = td.firstChild;\n    input.value = this._getVal(x, y);\n  }\n\n  _stopEditing = () => {\n    if (!this._editing) return;\n    const { x, y } = this._editing;\n    const td = this._getCell(x, y);\n    td.style.width = \"\";\n    td.style.height = \"\";\n    const input = td.firstChild;\n    input.removeEventListener(\"blur\", this._stopEditing);\n    input.removeEventListener(\"keydown\", this._blurIfEnter);\n    this._setVal(x, y, input.value);\n    td.removeChild(input);\n    this._editing = null;\n    this._renderTDContent(td, x, y);\n    this._onDataChanged();\n  };\n  _blurIfEnter = (e) => {\n    const code = e.keyCode;\n    if (code === 13) {\n      // enter\n      this._stopEditing();\n      e.preventDefault();\n    }\n  };\n\n  _changeSelectedCellsStyle(callback) {\n    const oldS = this._selection;\n    callback();\n    this._selection = this._getSelectionCoords();\n    this._forSelectionCoord(oldS, this._restyle);\n    this._forSelectionCoord(this._selection, this._restyle);\n  }\n\n  _getSelectionCoords() {\n    if (!this._selectionStart) return { rx: [0, 0], ry: [0, 0] };\n    let rx = [this._selectionStart.x, this._selectionEnd.x];\n    if (rx[0] > rx[1]) rx.reverse();\n    let ry = [this._selectionStart.y, this._selectionEnd.y];\n    if (ry[0] > ry[1]) ry.reverse();\n    return { rx: [rx[0], rx[1] + 1], ry: [ry[0], ry[1] + 1] };\n  }\n\n  _forSelectionCoord({ rx, ry }, cb) {\n    for (let x = rx[0]; x < rx[1]; x++)\n      for (let y = ry[0]; y < ry[1]; y++)\n        if (this._fitBounds({ x, y })) cb({ x, y });\n  }\n\n  _restyle = ({ x, y }) => {\n    this._getCell(x, y).className = this._classNames(x, y);\n  };\n\n  _selectionSize() {\n    const { rx, ry } = this._selection;\n    return (rx[1] - rx[0]) * (ry[1] - ry[0]);\n  }\n\n  _classNames(x, y) {\n    const { rx, ry } = this._selection;\n    let classes = \"\";\n    if (x >= rx[0] && x < rx[1] && y >= ry[0] && y < ry[1]) {\n      classes += \" selected\";\n      if (this._selectionSize() > 1) {\n        classes += \" multi\";\n      }\n    }\n\n    if (this._focus && this._focus.x === x && this._focus.y === y) {\n      classes += \" focus\";\n    }\n    if (this._editing && x === this._editing.x && y === this._editing.y) {\n      classes += \" editing\";\n    }\n\n    return classes;\n  }\n\n  _refreshDisplayedValue = ({ x, y }) => {\n    const div = this._getCell(x, y).firstChild;\n    if (div.tagName === \"DIV\") {\n      div.textContent = this._getVal(x, y);\n    }\n    this._restyle({ x, y });\n  };\n\n  _getCoords(e) {\n    // Returns the clicked cell coords or null\n    let node = e.target;\n    while (!node.getAttribute(\"x\") && node.parentElement) {\n      node = node.parentElement;\n    }\n    return {\n      x: parseInt(node.getAttribute(\"x\")) || 0,\n      y: parseInt(node.getAttribute(\"y\")) || 0,\n    };\n  }\n\n  /** Replace the current data with the provided 2D array.\n   * @param {[[String]]} data the new data, as a 2D array.\n   * */\n  setData(data) {\n    // Empty table\n    this._data._clear();\n    // paste data\n    this._replaceDataWithArray(data);\n\n    // Refresh all cell, including outide of the\n    // provided rect, as they've juste been emptied\n    for (let x = 0; x < this._width; x++)\n      for (let y = 0; y < this._height; y++)\n        this._refreshDisplayedValue({ x, y });\n  }\n\n  /**Returns the current data as a 2D array\n   * @return {[[String]]} data the latest data as a 2D array.\n   *\n   * */\n  getData() {\n    return this._data._toArr();\n  }\n\n  _replaceDataWithArray(data) {\n    data.forEach((line, y) => {\n      line.forEach((val, x) => {\n        this._setVal(x, y, val);\n      });\n    });\n  }\n\n  _setVal(x, y, val) {\n    if (!this._fitBounds({ x, y })) return;\n\n    this._data._setVal(x, y, val);\n    this._incrementToFit({ x: x + 1, y: y + 1 });\n    this._refreshDisplayedValue({ x, y });\n  }\n\n  _getVal(x, y) {\n    return this._data._getVal(x, y);\n  }\n\n  _getCell(x, y) {\n    return this.tbody.children[y].children[x];\n  }\n}\nexport function _shift(x, y, deltaX, xMin, xMax, yMin, yMax) {\n  x += deltaX;\n  if (x < xMin) {\n    if (xMax === Infinity) {\n      return { x: xMin, y };\n    }\n    x = xMax;\n    y--;\n    if (y < yMin) {\n      if (yMax === Infinity) {\n        return { x: xMin, y: yMin };\n      }\n      y = yMax;\n    }\n  }\n  if (x > xMax) {\n    x = xMin;\n    y++;\n    if (y > yMax) {\n      y = yMin;\n      x = xMin;\n    }\n  }\n  return { x, y };\n}\n\nexport function _parsePasteEvent(event) {\n  try {\n    const html = (event.clipboardData || window.clipboardData).getData(\n      \"text/html\"\n    );\n\n    const iframe = document.createElement(\"iframe\");\n    document.body.appendChild(iframe);\n    iframe.contentWindow.document.open();\n    iframe.contentWindow.document.write(html);\n    iframe.contentWindow.document.close();\n\n    const trs = iframe.contentWindow.document.querySelectorAll(\"tr\");\n    const data = [];\n    Array.prototype.forEach.call(trs, (tr, y) => {\n      const tds = tr.querySelectorAll(\"td\");\n      Array.prototype.forEach.call(tds, (td, x) => {\n        const text = td.textContent;\n        if (!data[y]) data[y] = [];\n        data[y][x] = text;\n      });\n    });\n\n    document.body.removeChild(iframe);\n    if (data.length) return data;\n  } catch (e) {}\n\n  const fromText = (event.clipboardData || window.clipboardData)\n    .getData(\"text\")\n    .split(/\\r\\n|\\n|\\r/)\n    .map((row) => row.split(\"\"));\n  return fromText;\n}\nexport class _LooseArray {\n  // An 2D array of strings that only stores non \"\" values\n  _data = {};\n\n  _setVal(x, y, val) {\n    const hash = this._data;\n    const cleanedVal = _cleanVal(val);\n    if (cleanedVal) {\n      if (!hash[x]) hash[x] = {};\n      hash[x][y] = cleanedVal;\n    } else {\n      // delete item\n      if (hash[x] && hash[x][y]) {\n        delete hash[x][y];\n        if (_isEmpty(hash[x])) delete hash[x];\n      }\n    }\n  }\n\n  _clear() {\n    this._data = {};\n  }\n\n  _getVal(x, y) {\n    const hash = this._data;\n    return (hash && hash[x] && hash[x][y]) || \"\";\n  }\n\n  _toArr() {\n    let width = 1,\n      height = 1;\n    for (let x in this._data) {\n      for (let y in this._data[x]) {\n        height = Math.max(height, parseInt(y) + 1);\n        width = Math.max(width, parseInt(x) + 1);\n      }\n    }\n    const result = [];\n    for (let y = 0; y < height; y++) {\n      result.push([]);\n      for (let x = 0; x < width; x++) {\n        result[y].push(this._getVal(x, y));\n      }\n    }\n    return result;\n  }\n}\n\nexport function _cleanVal(val) {\n  if (val === 0) return \"0\";\n  if (!val) return \"\";\n  return val.toString();\n}\n\nexport function _isEmpty(obj) {\n  return Object.keys(obj).length === 0;\n}\nexport function _arrToHTML(arr) {\n  const table = document.createElement(\"table\");\n  table.setAttribute(\"lang\", navigator.language);\n  arr.forEach((row) => {\n    const tr = document.createElement(\"tr\");\n    table.appendChild(tr);\n    row.forEach((cell) => {\n      const td = document.createElement(\"td\");\n      tr.appendChild(td);\n      td.textContent = cell;\n    });\n  });\n  return `<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\"><html lang=\"${navigator.language}\"><head>\n<meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\"/><title></title></head><body>${table.outerHTML}</body></html>`;\n}\nexport const _defaultCss = `\nhtml{\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n}\n::-webkit-scrollbar {\n  visibility: hidden;\n}\n*{\n  box-sizing: border-box;\n}\nbody{\n  padding: 0; \n  margin: 0;\n}\ntable{\n  border-spacing: 0;\n  background: white;\n  border: 1px solid #ddd;\n  border-width: 0 1px 1px 0;\n  font-size: 16px;\n  font-family: sans-serif;\n  border-collapse: separate;\n}\ntd{\n  padding:0;\n  border: 1px solid;\n  border-color: #ddd transparent transparent #ddd; \n}\ntd.selected.multi:not(.editing){\n  background:#d7f2f9;\n} \ntd.focus:not(.editing){\n  border-color: black;\n} \ntd>*{\n  border:none;\n  padding:10px;\n  min-width:100px;\n  min-height: 40px;\n  font:inherit;\n  line-height: 20px;\n  color:inherit;\n  white-space: normal;\n}\ntd>div::selection {\n    color: none;\n    background: none;\n}\n`;\n","import Importabular from \"../src/index.js\";\nimport \"./demo.css\";\n\nwindow.sheet = new Importabular({\n  data: [\n    [\"Product ID\", \"Product name\", \"Price\", \"Unit\", \"Category\"],\n    [\"256\", \"Sample product\", \"2.5\", \"Piece\", \"Stuffs\"],\n    [\"122\", \"Pre mix drink\", \"5\", \"Bottle\", \"Drinks\"],\n  ],\n  node: document.getElementById(\"editorNode\"),\n  maxCols: 5,\n});\n\nconsole.info(`\n\nYou can play around with the instance on the page, try :\n\nsheet.getData()\nsheet.setData([['Hello','World']])\nsheet.destroy()\n\n`);\n\nArray.prototype.forEach.call(\n  document.getElementsByClassName(\"readable\"),\n  (n) => {\n    const pre = document.createElement(\"pre\");\n    pre.className = \"auto\";\n\n    let js = n.innerText\n      .trim()\n      .replace('from \"./dist/index.js\"', 'from \"importabular\"')\n      .replace('from \"./src/index.js\"', 'from \"importabular/src/index.js\"');\n\n    const lines = js.split(\"\\n\");\n    const offset = lines[1].match(/ +/)[0].length;\n    js = lines\n      .map((l, i) =>\n        i ? (l.slice(0, offset).trim() ? l.trim() : l.slice(offset)) : l\n      )\n      .join(\"\\n\");\n\n    pre.innerText = js;\n\n    n.parentElement.appendChild(pre);\n  }\n);\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}